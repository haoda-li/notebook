<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Haoda Li"><link rel=prev href=bvh.html><link rel=next href=kinematics.html><link rel=icon href=../assets/logo.png><meta name=generator content="mkdocs-1.4.3, mkdocs-material-9.1.19"><title>Shader Pipeline - Notebook</title><link rel=stylesheet href=../assets/stylesheets/main.eebd395e.min.css><link rel=stylesheet href=../assets/stylesheets/palette.ecc896b0.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css><link rel=stylesheet href=../assets/extra.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><link href=../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
        html.glightbox-open { overflow: initial; height: 100%; }
        .gslide-title { margin-top: 0px; user-select: text; }
        .gslide-desc { color: #666; user-select: text; }
        .gslide-image img { background: white; }
        
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
            </style><script src=../assets/javascripts/glightbox.min.js></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=green data-md-color-accent=deep-purple> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#shader-pipeline class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../index.html title=Notebook class="md-header__button md-logo" aria-label=Notebook data-md-component=logo> <img src=../assets/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Notebook </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Shader Pipeline </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=green data-md-color-accent=deep-purple aria-label="Dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=deep-purple data-md-color-accent=green aria-label="Light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/haoda-li/notebook title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../index.html class=md-tabs__link> Courses </a> </li> <li class=md-tabs__item> <a href=../cs294173/intro.html class="md-tabs__link md-tabs__link--active"> CS - VCCG </a> </li> <li class=md-tabs__item> <a href=../csc412/models.html class=md-tabs__link> CS - AIML </a> </li> <li class=md-tabs__item> <a href=../cs267/communication.html class=md-tabs__link> CS - General </a> </li> <li class=md-tabs__item> <a href=../mat337/real_number_construction.html class=md-tabs__link> Mathematics </a> </li> <li class=md-tabs__item> <a href=../sta303/Summary.html class=md-tabs__link> Statistics </a> </li> <li class=md-tabs__item> <a href=https://haoda-li.github.io/ class=md-tabs__link> Main </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../index.html title=Notebook class="md-nav__button md-logo" aria-label=Notebook data-md-component=logo> <img src=../assets/logo.png alt=logo> </a> Notebook </label> <div class=md-nav__source> <a href=https://github.com/haoda-li/notebook title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../index.html class=md-nav__link> Courses </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> CS - VCCG <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> CS - VCCG </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_1> <label class=md-nav__link for=__nav_2_1 id=__nav_2_1_label tabindex=0> CS294-173 Learning for 3D Seminar <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> CS294-173 Learning for 3D Seminar </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../cs294173/intro.html class=md-nav__link> Problem Formulations for 3D Vision </a> </li> <li class=md-nav__item> <a href=../cs294173/optical_flow.html class=md-nav__link> Supervised Correspondence </a> </li> <li class=md-nav__item> <a href=../cs294173/supervised3d.html class=md-nav__link> Single View 3D with Supervision </a> </li> <li class=md-nav__item> <a href=../cs294173/pointcloud.html class=md-nav__link> Deep Learning for 3D Point Clouds </a> </li> <li class=md-nav__item> <a href=../cs294173/nerf.html class=md-nav__link> Neural Radiance Fields </a> </li> <li class=md-nav__item> <a href=../cs294173/shl.html class=md-nav__link> Spherical Harmonic Lighting </a> </li> <li class=md-nav__item> <a href=../cs294173/sdf_nerf.html class=md-nav__link> Surface based Volume Rendering </a> </li> <li class=md-nav__item> <a href=../cs294173/3dgaussian.html class=md-nav__link> Point-based Spatting for NeRF </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> CS284A Computer Graphics and Imaging <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> CS284A Computer Graphics and Imaging </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../cs284/sampling.html class=md-nav__link> Sampling Theory </a> </li> <li class=md-nav__item> <a href=../cs284/transforms.html class=md-nav__link> 3D Transformations </a> </li> <li class=md-nav__item> <a href=../cs284/texture.html class=md-nav__link> Texture Mapping </a> </li> <li class=md-nav__item> <a href=../cs284/splines.html class=md-nav__link> Splines </a> </li> <li class=md-nav__item> <a href=../cs284/mesh.html class=md-nav__link> Mesh Representations </a> </li> <li class=md-nav__item> <a href=../cs284/raytracing.html class=md-nav__link> Ray Tracing and Acceleration Data Structure </a> </li> <li class=md-nav__item> <a href=../cs284/mcintegral.html class=md-nav__link> Monte Carlo Integration </a> </li> <li class=md-nav__item> <a href=../cs284/pathtracing.html class=md-nav__link> Global Illumination and Path Tracing </a> </li> <li class=md-nav__item> <a href=../cs284/camera.html class=md-nav__link> Cameras </a> </li> <li class=md-nav__item> <a href=../cs284/kinematics.html class=md-nav__link> Animation through Kinematics </a> </li> <li class=md-nav__item> <a href=../cs284/simulation.html class=md-nav__link> Physics based Animation </a> </li> <li class=md-nav__item> <a href=../cs284/fluids.html class=md-nav__link> Fluid Simulation </a> </li> <li class=md-nav__item> <a href=../cs284/color.html class=md-nav__link> Color Sciences </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3 checked> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> CSC418 Computer Graphics <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=true> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> CSC418 Computer Graphics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=raster_image.html class=md-nav__link> Raster Image </a> </li> <li class=md-nav__item> <a href=meshes.html class=md-nav__link> Meshes </a> </li> <li class=md-nav__item> <a href=bvh.html class=md-nav__link> Bounding Volume Hierarchy </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Shader Pipeline <span class="md-nav__icon md-icon"></span> </label> <a href=shader_pipeline.html class="md-nav__link md-nav__link--active"> Shader Pipeline </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#viewing-transformations class=md-nav__link> Viewing Transformations </a> <nav class=md-nav aria-label="Viewing Transformations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#perspective-projections class=md-nav__link> Perspective Projections </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#shader-pipeline-opengl class=md-nav__link> Shader Pipeline (OpenGL) </a> </li> <li class=md-nav__item> <a href=#value-noise-and-procedural-patterns class=md-nav__link> Value Noise and Procedural Patterns </a> <nav class=md-nav aria-label="Value Noise and Procedural Patterns"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#noise class=md-nav__link> Noise </a> <nav class=md-nav aria-label=Noise> <ul class=md-nav__list> <li class=md-nav__item> <a href=#properties-of-ideal-noise class=md-nav__link> Properties of Ideal Noise </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#perlin-noise class=md-nav__link> Perlin Noise </a> <nav class=md-nav aria-label="Perlin Noise"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#algorithm class=md-nav__link> Algorithm </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#improved-perlin-noise class=md-nav__link> Improved Perlin Noise </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#bump-mapping-and-normal-mapping class=md-nav__link> Bump Mapping and Normal Mapping </a> </li> <li class=md-nav__item> <a href=#shader-demo class=md-nav__link> Shader Demo </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=kinematics.html class=md-nav__link> Kinematics </a> </li> <li class=md-nav__item> <a href=mass_spring_system.html class=md-nav__link> Mass-Spring System </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4 id=__nav_2_4_label tabindex=0> CSC417/CSC2549 Physics-based Animation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> CSC417/CSC2549 Physics-based Animation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../csc417/introduction.html class=md-nav__link> Math and Physics Background </a> </li> <li class=md-nav__item> <a href=../csc417/1d_mass_spring.html class=md-nav__link> 1D Mass Spring System </a> </li> <li class=md-nav__item> <a href=../csc417/3d_mass_spring_system.html class=md-nav__link> 3D Mass Spring System </a> </li> <li class=md-nav__item> <a href=../csc417/fem.html class=md-nav__link> Finite Element Method </a> </li> <li class=md-nav__item> <a href=../csc417/cloth.html class=md-nav__link> Cloth Simulation and Collision </a> </li> <li class=md-nav__item> <a href=../csc417/rigid_bodies.html class=md-nav__link> Rigid Body Simulation </a> </li> <li class=md-nav__item> <a href=../csc417/rotations.html class=md-nav__link> Rotation Matrix Time Derivatives </a> </li> <li class=md-nav__item> <a href=../csc417/collision.html class=md-nav__link> Rigid body Collisions </a> </li> <li class=md-nav__item> <a href=../csc417/fluids.html class=md-nav__link> Fluid Simulation using SPH and FLIP </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5> <label class=md-nav__link for=__nav_2_5 id=__nav_2_5_label tabindex=0> CSC419/CSC2520 Geometry Processing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> CSC419/CSC2520 Geometry Processing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../csc419/introduction.html class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../csc419/surface_reconstruction.html class=md-nav__link> Surface Reconstruction </a> </li> <li class=md-nav__item> <a href=../csc419/registration.html class=md-nav__link> Registration </a> </li> <li class=md-nav__item> <a href=../csc419/sparse_icp.html class=md-nav__link> Sparse Iterative Closest Point </a> </li> <li class=md-nav__item> <a href=../csc419/smoothing.html class=md-nav__link> Surface Smoothing </a> </li> <li class=md-nav__item> <a href=../csc419/deformation.html class=md-nav__link> Handle-based Deformation </a> </li> <li class=md-nav__item> <a href=../csc419/parameterization.html class=md-nav__link> Parameterization </a> </li> <li class=md-nav__item> <a href=../csc419/curvature.html class=md-nav__link> Curvature </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6> <label class=md-nav__link for=__nav_2_6 id=__nav_2_6_label tabindex=0> CSC320 Intro. Visual Computing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6> <span class="md-nav__icon md-icon"></span> CSC320 Intro. Visual Computing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../csc320/camera.html class=md-nav__link> Camera </a> </li> <li class=md-nav__item> <a href=../csc320/matting.html class=md-nav__link> Image Matting </a> </li> <li class=md-nav__item> <a href=../csc320/hdr.html class=md-nav__link> High Dynamic Range </a> </li> <li class=md-nav__item> <a href=../csc320/blending.html class=md-nav__link> Image Pyramids and Blending </a> </li> <li class=md-nav__item> <a href=../csc320/poly_fitting.html class=md-nav__link> Polynomial Fitting </a> </li> <li class=md-nav__item> <a href=../csc320/wavelet.html class=md-nav__link> Wavelet Transform </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_7> <label class=md-nav__link for=__nav_2_7 id=__nav_2_7_label tabindex=0> CSC420 Intro. Image Understanding <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_7_label aria-expanded=false> <label class=md-nav__title for=__nav_2_7> <span class="md-nav__icon md-icon"></span> CSC420 Intro. Image Understanding </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../csc420/linear_filters.html class=md-nav__link> Linear Filters </a> </li> <li class=md-nav__item> <a href=../csc420/edge_detection.html class=md-nav__link> Edge Detection </a> </li> <li class=md-nav__item> <a href=../csc420/image_pyramids.html class=md-nav__link> Image Pyramids </a> </li> <li class=md-nav__item> <a href=../csc420/harris_corner_detector.html class=md-nav__link> Image Features - Harris Corner Detector </a> </li> <li class=md-nav__item> <a href=../csc420/blob_detection.html class=md-nav__link> Image Features - Blob Detection </a> </li> <li class=md-nav__item> <a href=../csc420/sift.html class=md-nav__link> Scale Invariant Feature Transform </a> </li> <li class=md-nav__item> <a href=../csc420/camera_model.html class=md-nav__link> Homography - Basics and Camera Model </a> </li> <li class=md-nav__item> <a href=../csc420/stereo.html class=md-nav__link> Homography - Stereo </a> </li> <li class=md-nav__item> <a href=../csc420/indexing.html class=md-nav__link> Features Fast Retrival </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> CS - AIML <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> CS - AIML </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> CSC412/CSC2506 Probabilistic Learning and Reasoning <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> CSC412/CSC2506 Probabilistic Learning and Reasoning </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../csc412/models.html class=md-nav__link> Probabilistic Models </a> </li> <li class=md-nav__item> <a href=../csc412/dag.html class=md-nav__link> Joint distributions with Graphical models </a> </li> <li class=md-nav__item> <a href=../csc412/inference.html class=md-nav__link> Exact Inference </a> </li> <li class=md-nav__item> <a href=../csc412/mc.html class=md-nav__link> Hidden Markov Models </a> </li> <li class=md-nav__item> <a href=../csc412/sampling.html class=md-nav__link> Sampling </a> </li> <li class=md-nav__item> <a href=../csc412/vi.html class=md-nav__link> Variational Inference </a> </li> <li class=md-nav__item> <a href=../csc412/vae.html class=md-nav__link> Variational Autoencoders </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex=0> CSC311 Intro. Machine Learning <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> CSC311 Intro. Machine Learning </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../csc311/knn.html class=md-nav__link> k-Nearest Neighbors </a> </li> <li class=md-nav__item> <a href=../csc311/bvd.html class=md-nav__link> Bias-Variane Decomposition </a> </li> <li class=md-nav__item> <a href=../csc311/decision_trees.html class=md-nav__link> Decision Trees </a> </li> <li class=md-nav__item> <a href=../csc311/linear_regression.html class=md-nav__link> Linear Regression </a> </li> <li class=md-nav__item> <a href=../csc311/svm.html class=md-nav__link> Support Vector Machines and Boosting </a> </li> <li class=md-nav__item> <a href=../csc311/neural_nets.html class=md-nav__link> Neural Networks </a> </li> <li class=md-nav__item> <a href=../csc311/gradient_descent.html class=md-nav__link> Gradient Descent </a> </li> <li class=md-nav__item> <a href=../csc311/classification.html class=md-nav__link> Classification Optimization </a> </li> <li class=md-nav__item> <a href=../csc311/probabilistic_models.html class=md-nav__link> Probabilistic Models </a> </li> <li class=md-nav__item> <a href=../csc311/pca.html class=md-nav__link> Dimension Reduction - PCA and Auto Encoders </a> </li> <li class=md-nav__item> <a href=../csc311/kM_EM.html class=md-nav__link> k-Means and EM Algorithm </a> </li> <li class=md-nav__item> <a href=../csc311/matrix_factorization.html class=md-nav__link> Matrix Factorization </a> </li> <li class=md-nav__item> <a href=../csc311/reinforce_learning.html class=md-nav__link> Reinforcement Learning </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex=0> CSC384 Intro. Artificial Intelligence <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> CSC384 Intro. Artificial Intelligence </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../csc384/search.html class=md-nav__link> Search </a> </li> <li class=md-nav__item> <a href=../csc384/usearch.html class=md-nav__link> Uninformed search </a> </li> <li class=md-nav__item> <a href=../csc384/hsearch.html class=md-nav__link> Heuristic Search </a> </li> <li class=md-nav__item> <a href=../csc384/csp.html class=md-nav__link> CSP Backtracking </a> </li> <li class=md-nav__item> <a href=../csc384/fc_gac.html class=md-nav__link> Constraint Propagation </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> CS - General <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> CS - General </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1 id=__nav_4_1_label tabindex=0> CS267C Applications of Parallel Computers <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> CS267C Applications of Parallel Computers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../cs267/communication.html class=md-nav__link> Communication Optimal Matmul </a> </li> <li class=md-nav__item> <a href=../cs267/distributed.html class=md-nav__link> Advanced MPI </a> </li> <li class=md-nav__item> <a href=../cs267/dataparallel.html class=md-nav__link> Data Parallel Algorithms </a> </li> <li class=md-nav__item> <a href=../cs267/la.html class=md-nav__link> Parallel Dense Linear Algebra </a> </li> <li class=md-nav__item> <a href=../cs267/random.html class=md-nav__link> Randomized Algorithms </a> </li> <li class=md-nav__item> <a href=../cs267/upcxx.html class=md-nav__link> UPC++ Introduction </a> </li> <li class=md-nav__item> <a href=../cs267/ml.html class=md-nav__link> Parallel Machine Learning </a> </li> <li class=md-nav__item> <a href=../cs267/grid.html class=md-nav__link> Structured Grid for Poisson's Equations </a> </li> <li class=md-nav__item> <a href=../cs267/sparse_matrix.html class=md-nav__link> Sparse Matrices </a> </li> <li class=md-nav__item> <a href=../cs267/fft.html class=md-nav__link> Fast Fourier Transform </a> </li> <li class=md-nav__item> <a href=../cs267/sort.html class=md-nav__link> Parallel Searching and Sorting </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex=0> CSC367 Parallel Programming <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> CSC367 Parallel Programming </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../csc367/hie.html class=md-nav__link> Single Processor Machines </a> </li> <li class=md-nav__item> <a href=../csc367/matrix.html class=md-nav__link> Single Processor Matrix Multiplications </a> </li> <li class=md-nav__item> <a href=../csc367/simd.html class=md-nav__link> SIMD Parallelism </a> </li> <li class=md-nav__item> <a href=../csc367/parallel.html class=md-nav__link> Parallel Algorithm Design </a> </li> <li class=md-nav__item> <a href=../csc367/pthread.html class=md-nav__link> Shared Memory Model with PThread </a> </li> <li class=md-nav__item> <a href=../csc367/omp.html class=md-nav__link> OpenMP - Introduction of Parallelism </a> </li> <li class=md-nav__item> <a href=../csc367/omp_for.html class=md-nav__link> OpenMP - For Loop, Sections, Tasks </a> </li> <li class=md-nav__item> <a href=../csc367/omp_sync.html class=md-nav__link> OpenMP - Synchronizations and Performance Profiling </a> </li> <li class=md-nav__item> <a href=../csc367/mpi.html class=md-nav__link> Distributed Memory Model and MPI Introduction </a> </li> <li class=md-nav__item> <a href=../csc367/mpi_comm.html class=md-nav__link> MPI Communications </a> </li> <li class=md-nav__item> <a href=../csc367/cuda.html class=md-nav__link> CUDA Programming - Basics </a> </li> <li class=md-nav__item> <a href=../csc367/cuda_opt.html class=md-nav__link> CUDA Programming - Parallel Reduction </a> </li> <li class=md-nav__item> <a href=../csc367/slurm.html class=md-nav__link> SLURM Job Scheduling </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3 id=__nav_4_3_label tabindex=0> CSC336 Numerical Methods <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> CSC336 Numerical Methods </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../csc336/approx_error.html class=md-nav__link> Approxmation Errors and Conditioning, Stability </a> </li> <li class=md-nav__item> <a href=../csc336/arithmetic.html class=md-nav__link> Computer Arithmetic </a> </li> <li class=md-nav__item> <a href=../csc336/arithmetic_examples.html class=md-nav__link> Computer Arithmetic Examples </a> </li> <li class=md-nav__item> <a href=../csc336/norm.html class=md-nav__link> Norms of vectors and matrices </a> </li> <li class=md-nav__item> <a href=../csc336/matrix_conditioning.html class=md-nav__link> Conditioning of Linear Equation Systems </a> </li> <li class=md-nav__item> <a href=../csc336/lu_decomposition.html class=md-nav__link> LU Decomposition </a> </li> <li class=md-nav__item> <a href=../csc336/pivoting.html class=md-nav__link> Pivoting </a> </li> <li class=md-nav__item> <a href=../csc336/interpolations.html class=md-nav__link> Interpolations </a> </li> <li class=md-nav__item> <a href=../csc336/non_linear_equations.html class=md-nav__link> Solve Non-linear equations </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4 id=__nav_4_4_label tabindex=0> CSC343 Intro. Databases <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> CSC343 Intro. Databases </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../csc343/ra.html class=md-nav__link> Relational Algebra </a> </li> <li class=md-nav__item> <a href=../csc343/sql_query.html class=md-nav__link> SQL Query Syntax </a> </li> <li class=md-nav__item> <a href=../csc343/sql_def.html class=md-nav__link> SQL Definitions Syntax </a> </li> <li class=md-nav__item> <a href=../csc343/sql_man.html class=md-nav__link> SQL Data Manipulation Syntax </a> </li> <li class=md-nav__item> <a href=../csc343/rm.html class=md-nav__link> Relational Model </a> </li> <li class=md-nav__item> <a href=../csc343/fd.html class=md-nav__link> Functional Dependency </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5 id=__nav_4_5_label tabindex=0> CSC373 Algorithms Design, Analysis and Complexity <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> CSC373 Algorithms Design, Analysis and Complexity </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../csc373/greedy_algorithm.html class=md-nav__link> Greedy Algorithm </a> </li> <li class=md-nav__item> <a href=../csc373/dp.html class=md-nav__link> Dynamic Programming </a> </li> <li class=md-nav__item> <a href=../csc373/network_flow.html class=md-nav__link> Network Flow </a> </li> <li class=md-nav__item> <a href=../csc373/lp.html class=md-nav__link> Linear Programming </a> </li> <li class=md-nav__item> <a href=../csc373/p_np.html class=md-nav__link> P-NP Problem </a> </li> <li class=md-nav__item> <a href=../csc373/npc.html class=md-nav__link> NP-complete </a> </li> <li class=md-nav__item> <a href=../csc373/self_reducibility.html class=md-nav__link> Self Reducibility </a> </li> <li class=md-nav__item> <a href=../csc373/optimization_approximation.html class=md-nav__link> Optimization Approxiamation </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_6> <label class=md-nav__link for=__nav_4_6 id=__nav_4_6_label tabindex=0> CSC265 Enriched Data Structures and Analysis <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_6_label aria-expanded=false> <label class=md-nav__title for=__nav_4_6> <span class="md-nav__icon md-icon"></span> CSC265 Enriched Data Structures and Analysis </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../csc265/pq.html class=md-nav__link> Priority Queue: Max Heap </a> </li> <li class=md-nav__item> <a href=../csc265/mq.html class=md-nav__link> [+] Priority Queue: Mergeable Heap </a> </li> <li class=md-nav__item> <a href=../csc265/avl.html class=md-nav__link> Set: AVL Tree </a> </li> <li class=md-nav__item> <a href=../csc265/avl_app.html class=md-nav__link> [+] Augmented BST (AVL Tree) </a> </li> <li class=md-nav__item> <a href=../csc265/hashset.html class=md-nav__link> Set: Hash Tables </a> </li> <li class=md-nav__item> <a href=../csc265/random.html class=md-nav__link> Randomized QuickSort </a> </li> <li class=md-nav__item> <a href=../csc265/amortized.html class=md-nav__link> Amortized Analysis </a> </li> <li class=md-nav__item> <a href=../csc265/disjoint_set.html class=md-nav__link> Disjoint Set </a> </li> <li class=md-nav__item> <a href=../csc265/bfs.html class=md-nav__link> Graphs: Breadth-first Search </a> </li> <li class=md-nav__item> <a href=../csc265/dfs.html class=md-nav__link> Graphs: Depth-first Search </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> Mathematics <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Mathematics </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_1> <label class=md-nav__link for=__nav_5_1 id=__nav_5_1_label tabindex=0> MAT337 Intro. Real Analysis <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_1_label aria-expanded=false> <label class=md-nav__title for=__nav_5_1> <span class="md-nav__icon md-icon"></span> MAT337 Intro. Real Analysis </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../mat337/real_number_construction.html class=md-nav__link> Real Number Construction </a> </li> <li class=md-nav__item> <a href=../mat337/extremum.html class=md-nav__link> Extremum </a> </li> <li class=md-nav__item> <a href=../mat337/mct_bwt.html class=md-nav__link> MCT and BWT </a> </li> <li class=md-nav__item> <a href=../mat337/topology_reals.html class=md-nav__link> Topology of real number space </a> </li> <li class=md-nav__item> <a href=../mat337/normed_space.html class=md-nav__link> Normed Space </a> </li> <li class=md-nav__item> <a href=../mat337/inner_product_and_fourier.html class=md-nav__link> Inner Product Space and Fourier Series </a> </li> <li class=md-nav__item> <a href=../mat337/function_convergence.html class=md-nav__link> Functions Convergence </a> </li> <li class=md-nav__item> <a href=../mat337/series.html class=md-nav__link> Series </a> </li> <li class=md-nav__item> <a href=../mat337/AAT.html class=md-nav__link> Arzela-Ascoli Theorem </a> </li> <li class=md-nav__item> <a href=../mat337/approximations.html class=md-nav__link> Function Approximations </a> </li> <li class=md-nav__item> <a href=../mat337/ODE.html class=md-nav__link> Fixed Point and ODE </a> </li> <li class=md-nav__item> <a href=../mat337/swt.html class=md-nav__link> Extra. Stone Weierstrass Theorem </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2 id=__nav_5_2_label tabindex=0> MAT334 Complex Variables <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> MAT334 Complex Variables </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../mat334/intro.html class=md-nav__link> Introducing Complex Numbers </a> </li> <li class=md-nav__item> <a href=../mat334/functions.html class=md-nav__link> Elementary Functions </a> </li> <li class=md-nav__item> <a href=../mat334/cont_diff.html class=md-nav__link> Limit, Continuity, and Differentiability </a> </li> <li class=md-nav__item> <a href=../mat334/multi_val_func.html class=md-nav__link> Multivalued Functions </a> </li> <li class=md-nav__item> <a href=../mat334/integration.html class=md-nav__link> Complex Integration </a> </li> <li class=md-nav__item> <a href=../mat334/ct.html class=md-nav__link> Cauchy's Theorem </a> </li> <li class=md-nav__item> <a href=../mat334/cie.html class=md-nav__link> Cauchy's Integral Formula </a> </li> <li class=md-nav__item> <a href=../mat334/power_series.html class=md-nav__link> Power Series and Larent Series </a> </li> <li class=md-nav__item> <a href=../mat334/residue.html class=md-nav__link> Sigularities and Residue Theorem </a> </li> <li class=md-nav__item> <a href=../mat334/jl.html class=md-nav__link> Jordon's Lemma </a> </li> <li class=md-nav__item> <a href=../mat334/pvt.html class=md-nav__link> Principal Value Integrals </a> </li> <li class=md-nav__item> <a href=../mat334/arg.html class=md-nav__link> Argument Principle and Rouche's Theorem </a> </li> <li class=md-nav__item> <a href=../mat334/conformal.html class=md-nav__link> Conformal Map and Mobius Transformation </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_3> <label class=md-nav__link for=__nav_5_3 id=__nav_5_3_label tabindex=0> MAT363 Geometry of Curves and Surfaces <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> MAT363 Geometry of Curves and Surfaces </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../mat363/intro_curves.html class=md-nav__link> Introduction to Curves </a> </li> <li class=md-nav__item> <a href=../mat363/arc_length.html class=md-nav__link> Arc Length </a> </li> <li class=md-nav__item> <a href=../mat363/reparam.html class=md-nav__link> Reparameterization and unit-length curve </a> </li> <li class=md-nav__item> <a href=../mat363/curvature.html class=md-nav__link> Curvature </a> </li> <li class=md-nav__item> <a href=../mat363/plane_curve.html class=md-nav__link> Plane Curve </a> </li> <li class=md-nav__item> <a href=../mat363/space_curves.html class=md-nav__link> Space Curves </a> </li> <li class=md-nav__item> <a href=../mat363/fvt.html class=md-nav__link> Four Vertex Theorem </a> </li> <li class=md-nav__item> <a href=../mat363/iso_ineq.html class=md-nav__link> Isoperimetric Inequality </a> </li> <li class=md-nav__item> <a href=../mat363/intro_surface.html class=md-nav__link> Defining Surfaces </a> </li> <li class=md-nav__item> <a href=../mat363/surface_tangent.html class=md-nav__link> Surface Tangents and Derivatives </a> </li> <li class=md-nav__item> <a href=../mat363/surface_normals.html class=md-nav__link> Surface Normals and Orientability </a> </li> <li class=md-nav__item> <a href=../mat363/surface_examples.html class=md-nav__link> Examples of Surfaces </a> </li> <li class=md-nav__item> <a href=../mat363/examples_smooth.html class=md-nav__link> More Examples of Surface Regularity and Smoothness </a> </li> <li class=md-nav__item> <a href=../mat363/fff.html class=md-nav__link> First Fundamental Form </a> </li> <li class=md-nav__item> <a href=../mat363/isometry.html class=md-nav__link> Isometric, Conformal, Equiareal </a> </li> <li class=md-nav__item> <a href=../mat363/sff.html class=md-nav__link> Surface Curvatures </a> </li> <li class=md-nav__item> <a href=../mat363/gaussian_curvature.html class=md-nav__link> Gaussian Curvatures </a> </li> <li class=md-nav__item> <a href=../mat363/parallel_transport.html class=md-nav__link> Parallel Transport </a> </li> <li class=md-nav__item> <a href=../mat363/geodesics.html class=md-nav__link> Geodesics </a> </li> <li class=md-nav__item> <a href=../mat363/gcme.html class=md-nav__link> Gauss' Remarkable Theorem </a> </li> <li class=md-nav__item> <a href=../mat363/minimal_surface.html class=md-nav__link> Minimal Surfaces </a> </li> <li class=md-nav__item> <a href=../mat363/gbt.html class=md-nav__link> Gauss Bonnet Theorem </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_4> <label class=md-nav__link for=__nav_5_4 id=__nav_5_4_label tabindex=0> APM462 Nonlinear Optimization <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> APM462 Nonlinear Optimization </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../apm462/calculus_review.html class=md-nav__link> Calculus Review </a> </li> <li class=md-nav__item> <a href=../apm462/ufdo.html class=md-nav__link> Unconstrained Finite Dimensional Optimization </a> </li> <li class=md-nav__item> <a href=../apm462/ufdoq.html class=md-nav__link> Examples: Unconstrained Finite Dimensional Optimization </a> </li> <li class=md-nav__item> <a href=../apm462/ecfdo.html class=md-nav__link> Equality Constrained Finite Dimension Optimization </a> </li> <li class=md-nav__item> <a href=../apm462/ecfdoq.html class=md-nav__link> Examples: Equality Constrained Finite Dimension Optimization </a> </li> <li class=md-nav__item> <a href=../apm462/icfdo.html class=md-nav__link> Inequality Constrained Finite Dimension Optimization </a> </li> <li class=md-nav__item> <a href=../apm462/icfdoq.html class=md-nav__link> Examples: Inequality Constrained Finite Dimension Optimization </a> </li> <li class=md-nav__item> <a href=../apm462/newtons_method_and_steepest_descent.html class=md-nav__link> Newton's Method and Steepest Descent </a> </li> <li class=md-nav__item> <a href=../apm462/conjugate.html class=md-nav__link> Conjugate Directions and Conjugate Gradients </a> </li> <li class=md-nav__item> <a href=../apm462/conjugateq.html class=md-nav__link> Examples: Conjugate Directions and Conjugate Gradients </a> </li> <li class=md-nav__item> <a href=../apm462/uo_functional.html class=md-nav__link> Unconstrainted Optimization on Calulus of Variations </a> </li> <li class=md-nav__item> <a href=../apm462/uo_functional_q.html class=md-nav__link> Examples: Unconstrainted Optimization on Calulus of Variations </a> </li> <li class=md-nav__item> <a href=../apm462/co_functional.html class=md-nav__link> Constrainted Optimization on Calulus of Variations </a> </li> <li class=md-nav__item> <a href=../apm462/co_functional_q.html class=md-nav__link> Examples: Constrainted Optimization on Calulus of Variations </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> Statistics <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Statistics </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_1> <label class=md-nav__link for=__nav_6_1 id=__nav_6_1_label tabindex=0> STA303/STA1002 Methods of Data Analysis II <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_1_label aria-expanded=false> <label class=md-nav__title for=__nav_6_1> <span class="md-nav__icon md-icon"></span> STA303/STA1002 Methods of Data Analysis II </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../sta303/Summary.html class=md-nav__link> Summary Sheet </a> </li> <li class=md-nav__item> <a href=../sta303/two_way_ANOVA.html class=md-nav__link> Two Way ANOVA </a> </li> <li class=md-nav__item> <a href=../sta303/multi_comparisons.html class=md-nav__link> Multi Comparisons and One Way ANOVA </a> </li> <li class=md-nav__item> <a href=../sta303/binary_logistic_regression.html class=md-nav__link> Binary logistic regression </a> </li> <li class=md-nav__item> <a href=../sta303/case_spock.html class=md-nav__link> One Way ANOVA </a> </li> <li class=md-nav__item> <a href=../sta303/binomial_logistic_regression.html class=md-nav__link> Binomial Logistic Regression </a> </li> <li class=md-nav__item> <a href=../sta303/poisson_regression.html class=md-nav__link> Log-linear Regression (Poisson Regression) </a> </li> <li class=md-nav__item> <a href=../sta303/contingency.html class=md-nav__link> Factor independence and Contingency Table </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_2> <label class=md-nav__link for=__nav_6_2 id=__nav_6_2_label tabindex=0> STA347 Probability I <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_2_label aria-expanded=false> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> STA347 Probability I </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../sta347/probability.html class=md-nav__link> Introduction to Probability </a> </li> <li class=md-nav__item> <a href=../sta347/distribution.html class=md-nav__link> Random Variables and Single Variable Distributions </a> </li> <li class=md-nav__item> <a href=../sta347/mv_distribution.html class=md-nav__link> Multivariate Distributions </a> </li> <li class=md-nav__item> <a href=../sta347/function_rv.html class=md-nav__link> Functions of Random Variable </a> </li> <li class=md-nav__item> <a href=../sta347/expectations.html class=md-nav__link> Expectations </a> </li> <li class=md-nav__item> <a href=../sta347/var.html class=md-nav__link> Variance and Covariance </a> </li> <li class=md-nav__item> <a href=../sta347/ineq.html class=md-nav__link> Inequalities Related to Expecations </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_3> <label class=md-nav__link for=__nav_6_3 id=__nav_6_3_label tabindex=0> STA355 Theory of Statistical Practice <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_3_label aria-expanded=false> <label class=md-nav__title for=__nav_6_3> <span class="md-nav__icon md-icon"></span> STA355 Theory of Statistical Practice </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../sta355/statistical_models.html class=md-nav__link> Statistical Models </a> </li> <li class=md-nav__item> <a href=../sta355/order_statistics.html class=md-nav__link> Order Statistics </a> </li> <li class=md-nav__item> <a href=../sta355/spacings.html class=md-nav__link> Spacings </a> </li> <li class=md-nav__item> <a href=../sta355/density_estimation.html class=md-nav__link> Density Estimation </a> </li> <li class=md-nav__item> <a href=../sta355/methods_of_estimation.html class=md-nav__link> Methods of Estimation </a> </li> <li class=md-nav__item> <a href=../sta355/bayes_inference.html class=md-nav__link> Bayes Inference </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_4> <label class=md-nav__link for=__nav_6_4 id=__nav_6_4_label tabindex=0> STA457/STA2202 Time Series Analysis <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_4_label aria-expanded=false> <label class=md-nav__title for=__nav_6_4> <span class="md-nav__icon md-icon"></span> STA457/STA2202 Time Series Analysis </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../sta457/Summary.html class=md-nav__link> Summary Sheet </a> </li> <li class=md-nav__item> <a href=../sta457/Introduction.html class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../sta457/ARMA.html class=md-nav__link> Autoregressive (AR) and Moving Average (MA) model </a> </li> <li class=md-nav__item> <a href=../sta457/ARIMA.html class=md-nav__link> Autoregressive Integrated Moving Average (ARIMA) model </a> </li> <li class=md-nav__item> <a href=../sta457/Forecasting.html class=md-nav__link> Forecasting and Transfer Function Noise Model </a> </li> <li class=md-nav__item> <a href=../sta457/VAR.html class=md-nav__link> Vector Series (VAR Models) </a> </li> <li class=md-nav__item> <a href=../sta457/granger_causality_and_cointegration.html class=md-nav__link> Granger Causality and Co-integration </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=https://haoda-li.github.io/ class=md-nav__link> Main </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#viewing-transformations class=md-nav__link> Viewing Transformations </a> <nav class=md-nav aria-label="Viewing Transformations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#perspective-projections class=md-nav__link> Perspective Projections </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#shader-pipeline-opengl class=md-nav__link> Shader Pipeline (OpenGL) </a> </li> <li class=md-nav__item> <a href=#value-noise-and-procedural-patterns class=md-nav__link> Value Noise and Procedural Patterns </a> <nav class=md-nav aria-label="Value Noise and Procedural Patterns"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#noise class=md-nav__link> Noise </a> <nav class=md-nav aria-label=Noise> <ul class=md-nav__list> <li class=md-nav__item> <a href=#properties-of-ideal-noise class=md-nav__link> Properties of Ideal Noise </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#perlin-noise class=md-nav__link> Perlin Noise </a> <nav class=md-nav aria-label="Perlin Noise"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#algorithm class=md-nav__link> Algorithm </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#improved-perlin-noise class=md-nav__link> Improved Perlin Noise </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#bump-mapping-and-normal-mapping class=md-nav__link> Bump Mapping and Normal Mapping </a> </li> <li class=md-nav__item> <a href=#shader-demo class=md-nav__link> Shader Demo </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=shader-pipeline>Shader Pipeline</h1> <h2 id=viewing-transformations>Viewing Transformations</h2> <figure> <p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=100% href=assets/view_transformation.png><img alt src=assets/view_transformation.png width=720></a></p> </figure> <p>The viewing transformations inputs a canonical coordinate <span class=arithmatex>\((x, y, z)\)</span> to some <span class=arithmatex>\((x, y)\)</span> on the 2D image space. One common system is a sequence of 3 transformations - <strong>camera transformation</strong> <span class=arithmatex>\((x, y, z)\rightarrow (x_c, y_c, z_c)\)</span> given <span class=arithmatex>\(eye\)</span> and orientation <span class=arithmatex>\(u, v, w\)</span> - <strong>projection transformation</strong> <span class=arithmatex>\((x_c, y_c, z_c) \rightarrow (x_v, y_v)\)</span>, <span class=arithmatex>\(x_v, y_v\in [-1, 1]\)</span> all the points that are visible in the camera space given the type of projection desired - <strong>viewport transformation</strong> <span class=arithmatex>\((x_v, y_v)\rightarrow (I_x, I_y)\)</span> maps the unit image rectangle to desired rectangle in pixel coordinates</p> <h3 id=perspective-projections><a href=http://www.songho.ca/opengl/gl_projectionmatrix.html>Perspective Projections</a></h3> <h2 id=shader-pipeline-opengl><a href=https://www.khronos.org/opengl/wiki/Rendering_Pipeline_Overview>Shader Pipeline (OpenGL)</a></h2> <p><strong>Vertex specification</strong><br> Set up Vertex Array Object (VAO), which contains one or more Vertex BUffer Objects (VBO), each VBO stores some information about each vertex. For example, if we load a .obj file, then VAO (the object) may end up having several VBOs, for example, one VBO stores vertex positions, one VBO stores vertex colors, and another one stores vertex normals.</p> <p><strong>Vertex shader</strong><br> Performs operation on every vertex, doing all the homogeneous transformations, i.e.</p> <ul> <li><span class=arithmatex>\(M\)</span>: modeling transformation: to move object into world space, doing all the translations, rotations, scaling, etc. </li> <li><span class=arithmatex>\(V\)</span> viewing transformation/camera transformation: transforms from world coordinates to camera coordinates. </li> <li><span class=arithmatex>\(P\)</span> perspective projection matrix, so that we only consider vertex in the window space (visible within the camera), and normalize <span class=arithmatex>\((x, y, z)\)</span> by <span class=arithmatex>\(w\)</span>.</li> </ul> <p><strong>Tessellation</strong><br> patches of vertex data are subdivided into smaller Primitives. Tessellation control shader (TCS) determines how much tessellation to do and tessellation evaluation shader (TES) takes the tessellated patch and computes vertex values for each generated vertex.<br> For example Catmull–Clark subdivision can be a TCS/TES algorithm.</p> <p><strong>Rasterization</strong><br> Given the tessellated primitives, filled in the primitive with pixels. </p> <p><strong>Fragment shader</strong><br> Given a sample-sized segment of a rasterized Primitive, fragment shader computes a set of colors and a single depth value. In our cases, it will be pixel-wise coloring.</p> <p>Note that the shader pipeline is only for <code>OpenGL</code>. In other frameworks (<code>WebGL</code>, <code>DirectX</code>, etc.) the abstractions are different. For example, <code>WebGL</code> does not have support for tessellation and you have to do it in <code>js</code> (likely on CPU). </p> <div class=highlight><span class=filename>vertex shader example</span><pre><span></span><code><a href=#__codelineno-0-1 id=__codelineno-0-1 name=__codelineno-0-1></a><span class=k>varying</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>vViewPos</span><span class=p>;</span>
<a href=#__codelineno-0-2 id=__codelineno-0-2 name=__codelineno-0-2></a><span class=kt>void</span><span class=w> </span><span class=n>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-0-3 id=__codelineno-0-3 name=__codelineno-0-3></a><span class=w>    </span><span class=n>vPos</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>position</span><span class=p>;</span>
<a href=#__codelineno-0-4 id=__codelineno-0-4 name=__codelineno-0-4></a><span class=w>    </span><span class=n>vViewPos</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>modelViewMatrix</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=kt>vec4</span><span class=p>(</span><span class=n>position</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>)).</span><span class=n>xyz</span><span class=p>;</span>
<a href=#__codelineno-0-5 id=__codelineno-0-5 name=__codelineno-0-5></a><span class=w>    </span><span class=n>vNormal</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>normalMatrix</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>normalize</span><span class=p>(</span><span class=n>normal</span><span class=p>);</span>
<a href=#__codelineno-0-6 id=__codelineno-0-6 name=__codelineno-0-6></a><span class=w>    </span><span class=nb>gl_Position</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>projectionMatrix</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>modelViewMatrix</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=kt>vec4</span><span class=p>(</span><span class=n>position</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>);;</span><span class=w>   </span>
<a href=#__codelineno-0-7 id=__codelineno-0-7 name=__codelineno-0-7></a><span class=p>}</span>
<a href=#__codelineno-0-8 id=__codelineno-0-8 name=__codelineno-0-8></a><span class=err>`</span>
</code></pre></div> <div class=highlight><span class=filename>fragment shader example</span><pre><span></span><code><a href=#__codelineno-1-1 id=__codelineno-1-1 name=__codelineno-1-1></a><span class=c1>// fragment shader using Blinn Phong shading</span>
<a href=#__codelineno-1-2 id=__codelineno-1-2 name=__codelineno-1-2></a><span class=kt>vec3</span><span class=w> </span><span class=n>blinn_phong</span><span class=p>(</span><span class=kt>vec3</span><span class=w> </span><span class=n>ka</span><span class=p>,</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>kd</span><span class=p>,</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>ks</span><span class=p>,</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>p</span><span class=p>,</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>n</span><span class=p>,</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>v</span><span class=p>,</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>l</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-1-3 id=__codelineno-1-3 name=__codelineno-1-3></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>Ia</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0.4</span><span class=p>;</span>
<a href=#__codelineno-1-4 id=__codelineno-1-4 name=__codelineno-1-4></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>h</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>normalize</span><span class=p>(</span><span class=n>v</span><span class=o>+</span><span class=n>l</span><span class=p>);</span>
<a href=#__codelineno-1-5 id=__codelineno-1-5 name=__codelineno-1-5></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>ka</span><span class=o>*</span><span class=n>Ia</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>kd</span><span class=o>*</span><span class=n>max</span><span class=p>(</span><span class=n>dot</span><span class=p>(</span><span class=n>l</span><span class=p>,</span><span class=n>n</span><span class=p>),</span><span class=mf>0.0</span><span class=p>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>ks</span><span class=o>*</span><span class=n>pow</span><span class=p>(</span><span class=n>max</span><span class=p>(</span><span class=n>dot</span><span class=p>(</span><span class=n>h</span><span class=p>,</span><span class=n>n</span><span class=p>),</span><span class=mf>0.0</span><span class=p>),</span><span class=n>p</span><span class=p>);</span>
<a href=#__codelineno-1-6 id=__codelineno-1-6 name=__codelineno-1-6></a>
<a href=#__codelineno-1-7 id=__codelineno-1-7 name=__codelineno-1-7></a><span class=k>varying</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>vPos</span><span class=p>;</span>
<a href=#__codelineno-1-8 id=__codelineno-1-8 name=__codelineno-1-8></a><span class=k>varying</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>vNormal</span><span class=p>;</span>
<a href=#__codelineno-1-9 id=__codelineno-1-9 name=__codelineno-1-9></a><span class=k>varying</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>vViewPos</span><span class=p>;</span>
<a href=#__codelineno-1-10 id=__codelineno-1-10 name=__codelineno-1-10></a><span class=kt>void</span><span class=w> </span><span class=n>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-1-11 id=__codelineno-1-11 name=__codelineno-1-11></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>l</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>mat3</span><span class=p>(</span><span class=n>viewMatrix</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>normalize</span><span class=p>(</span><span class=kt>vec3</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=o>-</span><span class=mi>1</span><span class=p>));</span>
<a href=#__codelineno-1-12 id=__codelineno-1-12 name=__codelineno-1-12></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>normalize</span><span class=p>(</span><span class=n>vNormal</span><span class=p>);</span>
<a href=#__codelineno-1-13 id=__codelineno-1-13 name=__codelineno-1-13></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>v</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>normalize</span><span class=p>(</span><span class=o>-</span><span class=n>vViewPos</span><span class=p>);</span>
<a href=#__codelineno-1-14 id=__codelineno-1-14 name=__codelineno-1-14></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>color</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mix</span><span class=p>(</span><span class=kt>vec3</span><span class=p>(</span><span class=mf>0.9</span><span class=p>,</span><span class=mf>0.2</span><span class=p>,</span><span class=mf>0.3</span><span class=p>),</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>0.5</span><span class=p>,</span><span class=mf>0.45</span><span class=p>,</span><span class=mf>0.5</span><span class=p>),</span><span class=w> </span><span class=n>is_moon</span><span class=p>);</span>
<a href=#__codelineno-1-15 id=__codelineno-1-15 name=__codelineno-1-15></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>fragColor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>blinn_phong</span><span class=p>(</span>
<a href=#__codelineno-1-16 id=__codelineno-1-16 name=__codelineno-1-16></a><span class=w>        </span><span class=n>color</span><span class=p>,</span><span class=w> </span><span class=n>color</span><span class=p>,</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>),</span><span class=w> </span><span class=mf>300.0</span><span class=p>,</span>
<a href=#__codelineno-1-17 id=__codelineno-1-17 name=__codelineno-1-17></a><span class=w>        </span><span class=n>n</span><span class=p>,</span><span class=w> </span><span class=n>v</span><span class=p>,</span><span class=w> </span><span class=n>l</span>
<a href=#__codelineno-1-18 id=__codelineno-1-18 name=__codelineno-1-18></a><span class=w>    </span><span class=p>);</span>
<a href=#__codelineno-1-19 id=__codelineno-1-19 name=__codelineno-1-19></a><span class=w>    </span><span class=nb>gl_FragColor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>vec4</span><span class=p>(</span><span class=n>fragColor</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>);</span>
<a href=#__codelineno-1-20 id=__codelineno-1-20 name=__codelineno-1-20></a><span class=p>}</span>
</code></pre></div> <h2 id=value-noise-and-procedural-patterns>Value Noise and Procedural Patterns</h2> <p>Other than a texture mapping, we can also generate patterns, i.e. procedural patterns. For example, if we want to make a ocean texture, we can generate some waves mesh and color it by some algorithm, instead of map a 2D image onto it. </p> <h3 id=noise>Noise</h3> <p>Note that in reality, lots of patterns need some sort of "randomness", s.t. the volume of a cloud on the sky, the waves of the water, etc. </p> <h4 id=properties-of-ideal-noise>Properties of Ideal Noise</h4> <ul> <li><strong>pseudo random</strong> Given the same input, it should always return the same value. </li> <li><strong>dimension</strong> The noise function is some <span class=arithmatex>\(N:\mathbb R^d\rightarrow \mathbb R\)</span>, which is a <span class=arithmatex>\(d\)</span>-dim noise function. </li> <li><strong>band limited</strong> One of the frequencies dominates all others. </li> <li><strong>continuity / differentiability</strong> We want the change in local is small, but change in global is large</li> </ul> <h3 id=perlin-noise><a href=https://en.wikipedia.org/wiki/Perlin_noise#Algorithm_detail>Perlin Noise</a></h3> <p>Perlin noise is a example of value noise, it's pseudo random, and continuous, and good in producing marble like surfaces. </p> <h4 id=algorithm>Algorithm</h4> <p><strong>Grid Definition</strong><br> Define an n-dim grid where each point has a random n-dim unit-length gradient vector. </p> <p><strong>Dot product</strong><br> Assume <span class=arithmatex>\(3D\)</span> case and each box grid has side length 1. For query position <span class=arithmatex>\((x, y, z)\)</span>, it is located in some <span class=arithmatex>\(d\)</span>-dim grid formed by <span class=arithmatex>\(2^3\)</span> grid points, <span class=arithmatex>\((\lfloor x\rfloor, \lceil x\rceil)\times (\lfloor y\rfloor, \lceil y\rceil)\times (\lfloor z\rfloor, \lceil z\rceil)\)</span>. Generate <span class=arithmatex>\(2^d\)</span> <strong>dotGridGradient</strong> by dot product the offset to each grid point and gradient at that grid point. </p> <p><strong>Interpolation</strong><br> Note that we have <span class=arithmatex>\(2^3\)</span> scale values, and we will have a trilinear interpolation so that we can get the value at that point.<br> Note that we take a smooth step <span class=arithmatex>\(s:\mathbb R^d\rightarrow \mathbb R^d\)</span> as the coefficient of interpolation. <span class=arithmatex>\(s\)</span> must have the property <span class=arithmatex>\(s(0) = s(1) = s'(0) = s'(1) = 0\)</span>, one good smooth step function is </p> <div class=arithmatex>\[s(t) = 3t^2 - 2t^3\]</div> <h3 id=improved-perlin-noise>Improved Perlin Noise</h3> <p>Note that <span class=arithmatex>\(s''(t) = 6 - 12t\)</span> is not continuous, if the derivative of the function used to compute the normal of the displaced mesh is not continuous then it will introduce a discontinuity in these normals wherever <span class=arithmatex>\(x=0, 1\)</span>, so that we use improved smooth step</p> <div class=arithmatex>\[6t^5 - 15t^4 + 10t^3\]</div> <p>Also, note that when random directions (gradient direction) is close to standard direction <span class=arithmatex>\(e_i\)</span>, the noise function have very high values <span class=arithmatex>\(\sim1\)</span> causing a "splotchy appearance", so instead of using random directions, we use directions randomly chosen from 12 directions <span class=arithmatex>\((\pm 1,\pm 1,0), (\pm 1, 0, \pm 1), (0, \pm 1, \pm 1)\)</span></p> <div class=highlight><span class=filename>Random sampling from sphere</span><pre><span></span><code><a href=#__codelineno-2-1 id=__codelineno-2-1 name=__codelineno-2-1></a><span class=kt>vec3</span><span class=w> </span><span class=n>random_direction</span><span class=p>(</span><span class=kt>vec3</span><span class=w> </span><span class=n>seed</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-2-2 id=__codelineno-2-2 name=__codelineno-2-2></a><span class=w>    </span><span class=kt>vec2</span><span class=w> </span><span class=n>r2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>random2</span><span class=p>(</span><span class=n>seed</span><span class=p>);</span>
<a href=#__codelineno-2-3 id=__codelineno-2-3 name=__codelineno-2-3></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>2.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>r2</span><span class=p>.</span><span class=n>x</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mf>1.0</span><span class=p>;</span>
<a href=#__codelineno-2-4 id=__codelineno-2-4 name=__codelineno-2-4></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>r2</span><span class=p>.</span><span class=n>y</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mf>2.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mf>3.1415926</span><span class=p>;</span>
<a href=#__codelineno-2-5 id=__codelineno-2-5 name=__codelineno-2-5></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>r</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sqrt</span><span class=p>(</span><span class=mf>1.0</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>z</span><span class=o>*</span><span class=n>z</span><span class=p>);</span>
<a href=#__codelineno-2-6 id=__codelineno-2-6 name=__codelineno-2-6></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=n>z</span><span class=p>,</span><span class=w> </span><span class=n>r</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>cos</span><span class=p>(</span><span class=n>a</span><span class=p>),</span><span class=w> </span><span class=n>r</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>sin</span><span class=p>(</span><span class=n>a</span><span class=p>));</span>
<a href=#__codelineno-2-7 id=__codelineno-2-7 name=__codelineno-2-7></a><span class=p>}</span>
</code></pre></div> <div class=highlight><span class=filename>Smooth step and improved smooth step</span><pre><span></span><code><a href=#__codelineno-3-1 id=__codelineno-3-1 name=__codelineno-3-1></a><span class=kt>vec3</span><span class=w> </span><span class=n>smooth_step</span><span class=p>(</span><span class=kt>vec3</span><span class=w> </span><span class=n>f</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span>
<a href=#__codelineno-3-2 id=__codelineno-3-2 name=__codelineno-3-2></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=mf>3.0</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mf>2.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>f</span><span class=p>);</span><span class=w> </span>
<a href=#__codelineno-3-3 id=__codelineno-3-3 name=__codelineno-3-3></a><span class=p>}</span>
<a href=#__codelineno-3-4 id=__codelineno-3-4 name=__codelineno-3-4></a><span class=c1>// The improved version</span>
<a href=#__codelineno-3-5 id=__codelineno-3-5 name=__codelineno-3-5></a><span class=kt>vec3</span><span class=w> </span><span class=n>smooth_step</span><span class=p>(</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>f</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span>
<a href=#__codelineno-3-6 id=__codelineno-3-6 name=__codelineno-3-6></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mf>6.0</span><span class=o>*</span><span class=n>f</span><span class=o>*</span><span class=n>f</span><span class=o>*</span><span class=n>f</span><span class=o>*</span><span class=n>f</span><span class=o>*</span><span class=n>f</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mf>15.0</span><span class=o>*</span><span class=n>f</span><span class=o>*</span><span class=n>f</span><span class=o>*</span><span class=n>f</span><span class=o>*</span><span class=n>f</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>10.0</span><span class=o>*</span><span class=n>f</span><span class=o>*</span><span class=n>f</span><span class=o>*</span><span class=n>f</span><span class=p>;</span><span class=w> </span>
<a href=#__codelineno-3-7 id=__codelineno-3-7 name=__codelineno-3-7></a><span class=p>}</span>
</code></pre></div> <div class=highlight><span class=filename>Perlin noise from 3D Seed</span><pre><span></span><code><a href=#__codelineno-4-1 id=__codelineno-4-1 name=__codelineno-4-1></a><span class=kt>float</span><span class=w> </span><span class=n>perlin_noise</span><span class=p>(</span><span class=kt>vec3</span><span class=w> </span><span class=n>st</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-4-2 id=__codelineno-4-2 name=__codelineno-4-2></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>floor</span><span class=p>(</span><span class=n>st</span><span class=p>);</span>
<a href=#__codelineno-4-3 id=__codelineno-4-3 name=__codelineno-4-3></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fract</span><span class=p>(</span><span class=n>st</span><span class=p>);</span>
<a href=#__codelineno-4-4 id=__codelineno-4-4 name=__codelineno-4-4></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>u</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>smooth_step</span><span class=p>(</span><span class=n>f</span><span class=p>);</span>
<a href=#__codelineno-4-5 id=__codelineno-4-5 name=__codelineno-4-5></a>
<a href=#__codelineno-4-6 id=__codelineno-4-6 name=__codelineno-4-6></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>dotgrad000</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>dot</span><span class=p>(</span><span class=n>random_direction</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>)),</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>));</span>
<a href=#__codelineno-4-7 id=__codelineno-4-7 name=__codelineno-4-7></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>dotgrad001</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>dot</span><span class=p>(</span><span class=n>random_direction</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>)),</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>));</span>
<a href=#__codelineno-4-8 id=__codelineno-4-8 name=__codelineno-4-8></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>dotgrad010</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>dot</span><span class=p>(</span><span class=n>random_direction</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>)),</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>));</span>
<a href=#__codelineno-4-9 id=__codelineno-4-9 name=__codelineno-4-9></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>dotgrad011</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>dot</span><span class=p>(</span><span class=n>random_direction</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>)),</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>));</span>
<a href=#__codelineno-4-10 id=__codelineno-4-10 name=__codelineno-4-10></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>dotgrad100</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>dot</span><span class=p>(</span><span class=n>random_direction</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>)),</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>));</span>
<a href=#__codelineno-4-11 id=__codelineno-4-11 name=__codelineno-4-11></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>dotgrad101</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>dot</span><span class=p>(</span><span class=n>random_direction</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>)),</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>));</span>
<a href=#__codelineno-4-12 id=__codelineno-4-12 name=__codelineno-4-12></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>dotgrad110</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>dot</span><span class=p>(</span><span class=n>random_direction</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>)),</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>));</span>
<a href=#__codelineno-4-13 id=__codelineno-4-13 name=__codelineno-4-13></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>dotgrad111</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>dot</span><span class=p>(</span><span class=n>random_direction</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>)),</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>));</span>
<a href=#__codelineno-4-14 id=__codelineno-4-14 name=__codelineno-4-14></a>
<a href=#__codelineno-4-15 id=__codelineno-4-15 name=__codelineno-4-15></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>x00</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mix</span><span class=p>(</span><span class=n>dotgrad000</span><span class=p>,</span><span class=w> </span><span class=n>dotgrad100</span><span class=p>,</span><span class=w> </span><span class=n>u</span><span class=p>.</span><span class=n>x</span><span class=p>);</span>
<a href=#__codelineno-4-16 id=__codelineno-4-16 name=__codelineno-4-16></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>x01</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mix</span><span class=p>(</span><span class=n>dotgrad001</span><span class=p>,</span><span class=w> </span><span class=n>dotgrad101</span><span class=p>,</span><span class=w> </span><span class=n>u</span><span class=p>.</span><span class=n>x</span><span class=p>);</span>
<a href=#__codelineno-4-17 id=__codelineno-4-17 name=__codelineno-4-17></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>x10</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mix</span><span class=p>(</span><span class=n>dotgrad010</span><span class=p>,</span><span class=w> </span><span class=n>dotgrad110</span><span class=p>,</span><span class=w> </span><span class=n>u</span><span class=p>.</span><span class=n>x</span><span class=p>);</span>
<a href=#__codelineno-4-18 id=__codelineno-4-18 name=__codelineno-4-18></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>x11</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mix</span><span class=p>(</span><span class=n>dotgrad011</span><span class=p>,</span><span class=w> </span><span class=n>dotgrad111</span><span class=p>,</span><span class=w> </span><span class=n>u</span><span class=p>.</span><span class=n>x</span><span class=p>);</span>
<a href=#__codelineno-4-19 id=__codelineno-4-19 name=__codelineno-4-19></a>
<a href=#__codelineno-4-20 id=__codelineno-4-20 name=__codelineno-4-20></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>xy0</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mix</span><span class=p>(</span><span class=n>x00</span><span class=p>,</span><span class=w> </span><span class=n>x10</span><span class=p>,</span><span class=w> </span><span class=n>u</span><span class=p>.</span><span class=n>y</span><span class=p>);</span>
<a href=#__codelineno-4-21 id=__codelineno-4-21 name=__codelineno-4-21></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>xy1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mix</span><span class=p>(</span><span class=n>x01</span><span class=p>,</span><span class=w> </span><span class=n>x11</span><span class=p>,</span><span class=w> </span><span class=n>u</span><span class=p>.</span><span class=n>y</span><span class=p>);</span>
<a href=#__codelineno-4-22 id=__codelineno-4-22 name=__codelineno-4-22></a>
<a href=#__codelineno-4-23 id=__codelineno-4-23 name=__codelineno-4-23></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>mix</span><span class=p>(</span><span class=n>xy0</span><span class=p>,</span><span class=w> </span><span class=n>xy1</span><span class=p>,</span><span class=w> </span><span class=n>u</span><span class=p>.</span><span class=n>z</span><span class=p>);</span>
<a href=#__codelineno-4-24 id=__codelineno-4-24 name=__codelineno-4-24></a><span class=p>}</span>
</code></pre></div> <h2 id=bump-mapping-and-normal-mapping>Bump Mapping and Normal Mapping</h2> <p>The real surface is often rough and bumpy, we use bump mapping algorithm to achieve the same effect. </p> <div class=arithmatex>\[\tilde p(p):\mathbb R^3\rightarrow\mathbb R^3 := p + h(p)\hat n (p)\]</div> <p>where <span class=arithmatex>\(p\)</span> is the original position, <span class=arithmatex>\(\hat n\)</span> is the normal and <span class=arithmatex>\(h\)</span> is the bump height function. </p> <p>Then, note that we have to calculate a new normal for the bumped point as </p> <div class=arithmatex>\[\tilde n(p) = \partial_Tp\times \partial_Bp \approx \frac{\tilde p(p +\epsilon T)-\tilde p(p)}{\epsilon} \times \frac{\tilde p(p +\epsilon B)-\tilde p(p)}{\epsilon}\]</div> <p>where <span class=arithmatex>\(T, B\)</span> are the tangent and bitangent vector where </p> <div class=arithmatex>\[T = \min\{\hat n \times (0, 1, 0), \hat n \times (0, 0, 1)\}, B = T\times N\]</div> <p>Note that bump mapping does not actually change the vertex position, it is used to obtain the normal mapping so that we can apply the coloring and make the surface looks "bumpy"</p> <div class=highlight><span class=filename>Using random bump to remap normal</span><pre><span></span><code><a href=#__codelineno-5-1 id=__codelineno-5-1 name=__codelineno-5-1></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>bp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>bump_position</span><span class=p>(</span><span class=n>is_moon</span><span class=p>,</span><span class=w> </span><span class=n>sphere_fs_in</span><span class=p>);</span>
<a href=#__codelineno-5-2 id=__codelineno-5-2 name=__codelineno-5-2></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>eps</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0.0001</span><span class=p>;</span>
<a href=#__codelineno-5-3 id=__codelineno-5-3 name=__codelineno-5-3></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>T</span><span class=p>;</span>
<a href=#__codelineno-5-4 id=__codelineno-5-4 name=__codelineno-5-4></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>B</span><span class=p>;</span>
<a href=#__codelineno-5-5 id=__codelineno-5-5 name=__codelineno-5-5></a><span class=w>    </span><span class=n>tangent</span><span class=p>(</span><span class=n>n</span><span class=p>,</span><span class=n>T</span><span class=p>,</span><span class=n>B</span><span class=p>);</span>
<a href=#__codelineno-5-6 id=__codelineno-5-6 name=__codelineno-5-6></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>pT</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sphere_fs_in</span><span class=o>+</span><span class=n>eps</span><span class=o>*</span><span class=n>T</span><span class=p>;</span>
<a href=#__codelineno-5-7 id=__codelineno-5-7 name=__codelineno-5-7></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>pB</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sphere_fs_in</span><span class=o>+</span><span class=n>eps</span><span class=o>*</span><span class=n>B</span><span class=p>;</span>
<a href=#__codelineno-5-8 id=__codelineno-5-8 name=__codelineno-5-8></a><span class=w>    </span><span class=n>n</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>normalize</span><span class=p>(</span><span class=n>cross</span><span class=p>(</span>
<a href=#__codelineno-5-9 id=__codelineno-5-9 name=__codelineno-5-9></a><span class=w>        </span><span class=n>bump_position</span><span class=p>(</span><span class=n>is_moon</span><span class=p>,</span><span class=w> </span><span class=n>pT</span><span class=p>)</span><span class=o>-</span><span class=n>bp</span><span class=p>,</span>
<a href=#__codelineno-5-10 id=__codelineno-5-10 name=__codelineno-5-10></a><span class=w>        </span><span class=n>bump_position</span><span class=p>(</span><span class=n>is_moon</span><span class=p>,</span><span class=w> </span><span class=n>pB</span><span class=p>)</span><span class=o>-</span><span class=n>bp</span><span class=p>));</span>
<a href=#__codelineno-5-11 id=__codelineno-5-11 name=__codelineno-5-11></a><span class=w>    </span><span class=n>n</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>normalMatrix</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>normalize</span><span class=p>(</span><span class=n>n</span><span class=p>);</span>
</code></pre></div> <h2 id=shader-demo>Shader Demo</h2> <p>A demo of shaders, noise, and bump mapping</p> <iframe height=480 src=./assets/shaders.html width=100%></iframe> <details class=quote> <summary>Shader code</summary> <div class=highlight><pre><span></span><code><a href=#__codelineno-6-1 id=__codelineno-6-1 name=__codelineno-6-1></a><span class=c1>// Shader programs are merely strings and are only </span>
<a href=#__codelineno-6-2 id=__codelineno-6-2 name=__codelineno-6-2></a><span class=c1>// loaded onto GPU</span>
<a href=#__codelineno-6-3 id=__codelineno-6-3 name=__codelineno-6-3></a><span class=k>const</span><span class=w> </span><span class=n>blinn_phong</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>`</span>
<a href=#__codelineno-6-4 id=__codelineno-6-4 name=__codelineno-6-4></a><span class=kt>vec3</span><span class=w> </span><span class=n>blinn_phong</span><span class=p>(</span><span class=kt>vec3</span><span class=w> </span><span class=n>ka</span><span class=p>,</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>kd</span><span class=p>,</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>ks</span><span class=p>,</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>p</span><span class=p>,</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>n</span><span class=p>,</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>v</span><span class=p>,</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>l</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-6-5 id=__codelineno-6-5 name=__codelineno-6-5></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>Ia</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0.4</span><span class=p>;</span>
<a href=#__codelineno-6-6 id=__codelineno-6-6 name=__codelineno-6-6></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>h</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>normalize</span><span class=p>(</span><span class=n>v</span><span class=o>+</span><span class=n>l</span><span class=p>);</span>
<a href=#__codelineno-6-7 id=__codelineno-6-7 name=__codelineno-6-7></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>ka</span><span class=o>*</span><span class=n>Ia</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>kd</span><span class=o>*</span><span class=n>max</span><span class=p>(</span><span class=n>dot</span><span class=p>(</span><span class=n>l</span><span class=p>,</span><span class=n>n</span><span class=p>),</span><span class=mf>0.0</span><span class=p>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>ks</span><span class=o>*</span><span class=n>pow</span><span class=p>(</span><span class=n>max</span><span class=p>(</span><span class=n>dot</span><span class=p>(</span><span class=n>h</span><span class=p>,</span><span class=n>n</span><span class=p>),</span><span class=mf>0.0</span><span class=p>),</span><span class=n>p</span><span class=p>);</span>
<a href=#__codelineno-6-8 id=__codelineno-6-8 name=__codelineno-6-8></a><span class=p>}</span>
<a href=#__codelineno-6-9 id=__codelineno-6-9 name=__codelineno-6-9></a><span class=err>`</span>
<a href=#__codelineno-6-10 id=__codelineno-6-10 name=__codelineno-6-10></a>
<a href=#__codelineno-6-11 id=__codelineno-6-11 name=__codelineno-6-11></a><span class=k>const</span><span class=w> </span><span class=n>random_direction</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>`</span>
<a href=#__codelineno-6-12 id=__codelineno-6-12 name=__codelineno-6-12></a><span class=c1>// pseudo-random 2D vector from 2D or 3D seed</span>
<a href=#__codelineno-6-13 id=__codelineno-6-13 name=__codelineno-6-13></a><span class=kt>vec2</span><span class=w> </span><span class=n>random2</span><span class=p>(</span><span class=kt>vec2</span><span class=w> </span><span class=n>st</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-6-14 id=__codelineno-6-14 name=__codelineno-6-14></a><span class=w>    </span><span class=n>st</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>vec2</span><span class=p>(</span><span class=w> </span>
<a href=#__codelineno-6-15 id=__codelineno-6-15 name=__codelineno-6-15></a><span class=w>        </span><span class=n>dot</span><span class=p>(</span><span class=n>st</span><span class=p>,</span><span class=kt>vec2</span><span class=p>(</span><span class=mf>127.1</span><span class=p>,</span><span class=mf>311.7</span><span class=p>)),</span>
<a href=#__codelineno-6-16 id=__codelineno-6-16 name=__codelineno-6-16></a><span class=w>        </span><span class=n>dot</span><span class=p>(</span><span class=n>st</span><span class=p>,</span><span class=kt>vec2</span><span class=p>(</span><span class=mf>269.5</span><span class=p>,</span><span class=mf>183.3</span><span class=p>))</span>
<a href=#__codelineno-6-17 id=__codelineno-6-17 name=__codelineno-6-17></a><span class=w>    </span><span class=p>);</span>
<a href=#__codelineno-6-18 id=__codelineno-6-18 name=__codelineno-6-18></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>fract</span><span class=p>(</span><span class=n>sin</span><span class=p>(</span><span class=n>st</span><span class=p>)</span><span class=o>*</span><span class=mf>43758.5453123</span><span class=p>);</span>
<a href=#__codelineno-6-19 id=__codelineno-6-19 name=__codelineno-6-19></a><span class=p>}</span>
<a href=#__codelineno-6-20 id=__codelineno-6-20 name=__codelineno-6-20></a>
<a href=#__codelineno-6-21 id=__codelineno-6-21 name=__codelineno-6-21></a><span class=kt>vec2</span><span class=w> </span><span class=n>random2</span><span class=p>(</span><span class=kt>vec3</span><span class=w> </span><span class=n>st</span><span class=p>){</span>
<a href=#__codelineno-6-22 id=__codelineno-6-22 name=__codelineno-6-22></a><span class=w>    </span><span class=kt>vec2</span><span class=w> </span><span class=n>S</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>vec2</span><span class=p>(</span><span class=w> </span>
<a href=#__codelineno-6-23 id=__codelineno-6-23 name=__codelineno-6-23></a><span class=w>        </span><span class=n>dot</span><span class=p>(</span><span class=n>st</span><span class=p>,</span><span class=kt>vec3</span><span class=p>(</span><span class=mf>127.1</span><span class=p>,</span><span class=mf>311.7</span><span class=p>,</span><span class=mf>783.089</span><span class=p>)),</span>
<a href=#__codelineno-6-24 id=__codelineno-6-24 name=__codelineno-6-24></a><span class=w>        </span><span class=n>dot</span><span class=p>(</span><span class=n>st</span><span class=p>,</span><span class=kt>vec3</span><span class=p>(</span><span class=mf>269.5</span><span class=p>,</span><span class=mf>183.3</span><span class=p>,</span><span class=mf>173.542</span><span class=p>))</span>
<a href=#__codelineno-6-25 id=__codelineno-6-25 name=__codelineno-6-25></a><span class=w>    </span><span class=p>);</span>
<a href=#__codelineno-6-26 id=__codelineno-6-26 name=__codelineno-6-26></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>fract</span><span class=p>(</span><span class=n>sin</span><span class=p>(</span><span class=n>S</span><span class=p>)</span><span class=o>*</span><span class=mf>43758.5453123</span><span class=p>);</span>
<a href=#__codelineno-6-27 id=__codelineno-6-27 name=__codelineno-6-27></a><span class=p>}</span>
<a href=#__codelineno-6-28 id=__codelineno-6-28 name=__codelineno-6-28></a><span class=c1>// A uniform (pseudo-)random from unit sphere from a seed</span>
<a href=#__codelineno-6-29 id=__codelineno-6-29 name=__codelineno-6-29></a><span class=kt>vec3</span><span class=w> </span><span class=n>random_direction</span><span class=p>(</span><span class=kt>vec3</span><span class=w> </span><span class=n>seed</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-6-30 id=__codelineno-6-30 name=__codelineno-6-30></a><span class=w>    </span><span class=kt>vec2</span><span class=w> </span><span class=n>r2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>random2</span><span class=p>(</span><span class=n>seed</span><span class=p>);</span>
<a href=#__codelineno-6-31 id=__codelineno-6-31 name=__codelineno-6-31></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>2.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>r2</span><span class=p>.</span><span class=n>x</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mf>1.0</span><span class=p>;</span>
<a href=#__codelineno-6-32 id=__codelineno-6-32 name=__codelineno-6-32></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>r2</span><span class=p>.</span><span class=n>y</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mf>2.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mf>3.1415926</span><span class=p>;</span>
<a href=#__codelineno-6-33 id=__codelineno-6-33 name=__codelineno-6-33></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>r</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sqrt</span><span class=p>(</span><span class=mf>1.0</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>z</span><span class=o>*</span><span class=n>z</span><span class=p>);</span>
<a href=#__codelineno-6-34 id=__codelineno-6-34 name=__codelineno-6-34></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=n>z</span><span class=p>,</span><span class=w> </span><span class=n>r</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>cos</span><span class=p>(</span><span class=n>a</span><span class=p>),</span><span class=w> </span><span class=n>r</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>sin</span><span class=p>(</span><span class=n>a</span><span class=p>));</span>
<a href=#__codelineno-6-35 id=__codelineno-6-35 name=__codelineno-6-35></a><span class=p>}</span>
<a href=#__codelineno-6-36 id=__codelineno-6-36 name=__codelineno-6-36></a><span class=err>`</span>
<a href=#__codelineno-6-37 id=__codelineno-6-37 name=__codelineno-6-37></a>
<a href=#__codelineno-6-38 id=__codelineno-6-38 name=__codelineno-6-38></a><span class=k>const</span><span class=w> </span><span class=n>smooth_step</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>`</span>
<a href=#__codelineno-6-39 id=__codelineno-6-39 name=__codelineno-6-39></a><span class=kt>vec3</span><span class=w> </span><span class=n>smooth_step</span><span class=p>(</span><span class=kt>vec3</span><span class=w> </span><span class=n>f</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span>
<a href=#__codelineno-6-40 id=__codelineno-6-40 name=__codelineno-6-40></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=mf>3.0</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mf>2.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>f</span><span class=p>);</span><span class=w> </span>
<a href=#__codelineno-6-41 id=__codelineno-6-41 name=__codelineno-6-41></a><span class=p>}</span>
<a href=#__codelineno-6-42 id=__codelineno-6-42 name=__codelineno-6-42></a><span class=err>`</span>
<a href=#__codelineno-6-43 id=__codelineno-6-43 name=__codelineno-6-43></a>
<a href=#__codelineno-6-44 id=__codelineno-6-44 name=__codelineno-6-44></a><span class=k>const</span><span class=w> </span><span class=n>improved_smooth_step</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>`</span>
<a href=#__codelineno-6-45 id=__codelineno-6-45 name=__codelineno-6-45></a><span class=kt>vec3</span><span class=w> </span><span class=n>smooth_step</span><span class=p>(</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>f</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span>
<a href=#__codelineno-6-46 id=__codelineno-6-46 name=__codelineno-6-46></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mf>6.0</span><span class=o>*</span><span class=n>f</span><span class=o>*</span><span class=n>f</span><span class=o>*</span><span class=n>f</span><span class=o>*</span><span class=n>f</span><span class=o>*</span><span class=n>f</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mf>15.0</span><span class=o>*</span><span class=n>f</span><span class=o>*</span><span class=n>f</span><span class=o>*</span><span class=n>f</span><span class=o>*</span><span class=n>f</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>10.0</span><span class=o>*</span><span class=n>f</span><span class=o>*</span><span class=n>f</span><span class=o>*</span><span class=n>f</span><span class=p>;</span><span class=w> </span>
<a href=#__codelineno-6-47 id=__codelineno-6-47 name=__codelineno-6-47></a><span class=p>}</span>
<a href=#__codelineno-6-48 id=__codelineno-6-48 name=__codelineno-6-48></a><span class=err>`</span>
<a href=#__codelineno-6-49 id=__codelineno-6-49 name=__codelineno-6-49></a><span class=k>const</span><span class=w> </span><span class=n>perlin_noise</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>`</span>
<a href=#__codelineno-6-50 id=__codelineno-6-50 name=__codelineno-6-50></a><span class=kt>float</span><span class=w> </span><span class=n>perlin_noise</span><span class=p>(</span><span class=kt>vec3</span><span class=w> </span><span class=n>st</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-6-51 id=__codelineno-6-51 name=__codelineno-6-51></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>floor</span><span class=p>(</span><span class=n>st</span><span class=p>);</span>
<a href=#__codelineno-6-52 id=__codelineno-6-52 name=__codelineno-6-52></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fract</span><span class=p>(</span><span class=n>st</span><span class=p>);</span>
<a href=#__codelineno-6-53 id=__codelineno-6-53 name=__codelineno-6-53></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>u</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>smooth_step</span><span class=p>(</span><span class=n>f</span><span class=p>);</span>
<a href=#__codelineno-6-54 id=__codelineno-6-54 name=__codelineno-6-54></a>
<a href=#__codelineno-6-55 id=__codelineno-6-55 name=__codelineno-6-55></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>dotgrad000</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>dot</span><span class=p>(</span><span class=n>random_direction</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>)),</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>));</span>
<a href=#__codelineno-6-56 id=__codelineno-6-56 name=__codelineno-6-56></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>dotgrad001</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>dot</span><span class=p>(</span><span class=n>random_direction</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>)),</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>));</span>
<a href=#__codelineno-6-57 id=__codelineno-6-57 name=__codelineno-6-57></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>dotgrad010</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>dot</span><span class=p>(</span><span class=n>random_direction</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>)),</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>));</span>
<a href=#__codelineno-6-58 id=__codelineno-6-58 name=__codelineno-6-58></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>dotgrad011</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>dot</span><span class=p>(</span><span class=n>random_direction</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>)),</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>));</span>
<a href=#__codelineno-6-59 id=__codelineno-6-59 name=__codelineno-6-59></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>dotgrad100</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>dot</span><span class=p>(</span><span class=n>random_direction</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>)),</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>));</span>
<a href=#__codelineno-6-60 id=__codelineno-6-60 name=__codelineno-6-60></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>dotgrad101</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>dot</span><span class=p>(</span><span class=n>random_direction</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>)),</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>));</span>
<a href=#__codelineno-6-61 id=__codelineno-6-61 name=__codelineno-6-61></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>dotgrad110</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>dot</span><span class=p>(</span><span class=n>random_direction</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>)),</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>));</span>
<a href=#__codelineno-6-62 id=__codelineno-6-62 name=__codelineno-6-62></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>dotgrad111</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>dot</span><span class=p>(</span><span class=n>random_direction</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>)),</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>));</span>
<a href=#__codelineno-6-63 id=__codelineno-6-63 name=__codelineno-6-63></a>
<a href=#__codelineno-6-64 id=__codelineno-6-64 name=__codelineno-6-64></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>x00</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mix</span><span class=p>(</span><span class=n>dotgrad000</span><span class=p>,</span><span class=w> </span><span class=n>dotgrad100</span><span class=p>,</span><span class=w> </span><span class=n>u</span><span class=p>.</span><span class=n>x</span><span class=p>);</span>
<a href=#__codelineno-6-65 id=__codelineno-6-65 name=__codelineno-6-65></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>x01</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mix</span><span class=p>(</span><span class=n>dotgrad001</span><span class=p>,</span><span class=w> </span><span class=n>dotgrad101</span><span class=p>,</span><span class=w> </span><span class=n>u</span><span class=p>.</span><span class=n>x</span><span class=p>);</span>
<a href=#__codelineno-6-66 id=__codelineno-6-66 name=__codelineno-6-66></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>x10</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mix</span><span class=p>(</span><span class=n>dotgrad010</span><span class=p>,</span><span class=w> </span><span class=n>dotgrad110</span><span class=p>,</span><span class=w> </span><span class=n>u</span><span class=p>.</span><span class=n>x</span><span class=p>);</span>
<a href=#__codelineno-6-67 id=__codelineno-6-67 name=__codelineno-6-67></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>x11</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mix</span><span class=p>(</span><span class=n>dotgrad011</span><span class=p>,</span><span class=w> </span><span class=n>dotgrad111</span><span class=p>,</span><span class=w> </span><span class=n>u</span><span class=p>.</span><span class=n>x</span><span class=p>);</span>
<a href=#__codelineno-6-68 id=__codelineno-6-68 name=__codelineno-6-68></a>
<a href=#__codelineno-6-69 id=__codelineno-6-69 name=__codelineno-6-69></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>xy0</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mix</span><span class=p>(</span><span class=n>x00</span><span class=p>,</span><span class=w> </span><span class=n>x10</span><span class=p>,</span><span class=w> </span><span class=n>u</span><span class=p>.</span><span class=n>y</span><span class=p>);</span>
<a href=#__codelineno-6-70 id=__codelineno-6-70 name=__codelineno-6-70></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>xy1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mix</span><span class=p>(</span><span class=n>x01</span><span class=p>,</span><span class=w> </span><span class=n>x11</span><span class=p>,</span><span class=w> </span><span class=n>u</span><span class=p>.</span><span class=n>y</span><span class=p>);</span>
<a href=#__codelineno-6-71 id=__codelineno-6-71 name=__codelineno-6-71></a>
<a href=#__codelineno-6-72 id=__codelineno-6-72 name=__codelineno-6-72></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>mix</span><span class=p>(</span><span class=n>xy0</span><span class=p>,</span><span class=w> </span><span class=n>xy1</span><span class=p>,</span><span class=w> </span><span class=n>u</span><span class=p>.</span><span class=n>z</span><span class=p>);</span>
<a href=#__codelineno-6-73 id=__codelineno-6-73 name=__codelineno-6-73></a><span class=p>}</span>
<a href=#__codelineno-6-74 id=__codelineno-6-74 name=__codelineno-6-74></a><span class=err>`</span>
<a href=#__codelineno-6-75 id=__codelineno-6-75 name=__codelineno-6-75></a>
<a href=#__codelineno-6-76 id=__codelineno-6-76 name=__codelineno-6-76></a><span class=k>const</span><span class=w> </span><span class=n>bump</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>random_direction</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>improved_smooth_step</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>perlin_noise</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=err>`</span>
<a href=#__codelineno-6-77 id=__codelineno-6-77 name=__codelineno-6-77></a><span class=kt>float</span><span class=w> </span><span class=n>smooth_heaviside</span><span class=p>(</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>t</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-6-78 id=__codelineno-6-78 name=__codelineno-6-78></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=mf>1.</span><span class=o>/</span><span class=p>(</span><span class=mf>1.</span><span class=o>+</span><span class=n>exp</span><span class=p>(</span><span class=o>-</span><span class=mf>2.</span><span class=o>*</span><span class=n>t</span><span class=o>*</span><span class=p>(</span><span class=n>x</span><span class=p>)))</span><span class=o>-</span><span class=mf>1.</span><span class=o>/</span><span class=mf>2.</span><span class=p>)</span><span class=o>/</span><span class=p>(</span><span class=mf>1.</span><span class=o>/</span><span class=p>(</span><span class=mf>1.</span><span class=o>+</span><span class=n>exp</span><span class=p>(</span><span class=o>-</span><span class=mf>2.</span><span class=o>*</span><span class=n>t</span><span class=o>*</span><span class=mf>1.</span><span class=p>))</span><span class=o>-</span><span class=mf>1.</span><span class=o>/</span><span class=mf>2.</span><span class=p>);</span>
<a href=#__codelineno-6-79 id=__codelineno-6-79 name=__codelineno-6-79></a><span class=w>  </span><span class=p>}</span>
<a href=#__codelineno-6-80 id=__codelineno-6-80 name=__codelineno-6-80></a><span class=kt>float</span><span class=w> </span><span class=n>bump_height</span><span class=p>(</span><span class=kt>float</span><span class=w> </span><span class=n>is_moon</span><span class=p>,</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>s</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-6-81 id=__codelineno-6-81 name=__codelineno-6-81></a><span class=kt>float</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>=</span><span class=w> </span>
<a href=#__codelineno-6-82 id=__codelineno-6-82 name=__codelineno-6-82></a><span class=w>    </span><span class=mf>0.05</span><span class=w> </span><span class=o>*</span><span class=p>(</span><span class=mf>0.5</span><span class=o>+</span><span class=mf>0.5</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>smooth_heaviside</span><span class=p>(</span><span class=n>perlin_noise</span><span class=p>(</span><span class=mf>1.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>s</span><span class=p>),</span><span class=w> </span><span class=mf>10.0</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mf>2.0</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mf>1.0</span><span class=p>)</span>
<a href=#__codelineno-6-83 id=__codelineno-6-83 name=__codelineno-6-83></a><span class=w>    </span><span class=o>+</span><span class=p>(</span><span class=mf>0.5</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>0.44</span><span class=o>*</span><span class=p>(</span><span class=mf>1.0</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>is_moon</span><span class=p>))</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=mf>0.5</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>0.5</span><span class=w> </span><span class=o>*</span><span class=n>smooth_heaviside</span><span class=p>((</span>
<a href=#__codelineno-6-84 id=__codelineno-6-84 name=__codelineno-6-84></a><span class=w>    </span><span class=o>+</span><span class=p>(</span><span class=mf>0.6</span><span class=o>+</span><span class=mf>0.14</span><span class=o>*</span><span class=n>is_moon</span><span class=p>)</span><span class=o>*</span><span class=n>perlin_noise</span><span class=p>(</span><span class=mf>2.0</span><span class=o>*</span><span class=n>s</span><span class=p>)</span>
<a href=#__codelineno-6-85 id=__codelineno-6-85 name=__codelineno-6-85></a><span class=w>    </span><span class=o>+</span><span class=p>(</span><span class=mf>0.2</span><span class=o>-</span><span class=mf>0.04</span><span class=o>*</span><span class=n>is_moon</span><span class=p>)</span><span class=o>*</span><span class=n>perlin_noise</span><span class=p>(</span><span class=mf>4.0</span><span class=o>*</span><span class=n>s</span><span class=p>)</span>
<a href=#__codelineno-6-86 id=__codelineno-6-86 name=__codelineno-6-86></a><span class=w>    </span><span class=p>),</span><span class=mf>8.0</span><span class=o>-</span><span class=n>is_moon</span><span class=o>*-</span><span class=n>s</span><span class=p>.</span><span class=n>x</span><span class=o>*</span><span class=mf>7.0</span><span class=p>)</span><span class=o>*</span><span class=mf>2.0</span><span class=o>-</span><span class=mf>1.0</span><span class=p>)</span>
<a href=#__codelineno-6-87 id=__codelineno-6-87 name=__codelineno-6-87></a><span class=w>    </span><span class=o>+</span><span class=mf>0.01</span><span class=o>*</span><span class=p>(</span><span class=mf>0.5</span><span class=o>+</span><span class=mf>0.5</span><span class=o>*</span><span class=n>smooth_heaviside</span><span class=p>((</span>
<a href=#__codelineno-6-88 id=__codelineno-6-88 name=__codelineno-6-88></a><span class=w>    </span><span class=o>+</span><span class=mf>0.1</span><span class=o>*</span><span class=n>perlin_noise</span><span class=p>(</span><span class=w> </span><span class=mf>16.0</span><span class=o>*</span><span class=n>s</span><span class=p>)</span>
<a href=#__codelineno-6-89 id=__codelineno-6-89 name=__codelineno-6-89></a><span class=w>    </span><span class=p>),</span><span class=mf>4.0</span><span class=p>)</span><span class=o>*</span><span class=mf>2.0</span><span class=o>-</span><span class=mf>1.0</span><span class=p>)</span>
<a href=#__codelineno-6-90 id=__codelineno-6-90 name=__codelineno-6-90></a><span class=w>    </span><span class=o>-</span><span class=mf>.5</span><span class=p>;</span>
<a href=#__codelineno-6-91 id=__codelineno-6-91 name=__codelineno-6-91></a><span class=k>return</span><span class=w> </span><span class=mf>0.06</span><span class=o>*</span><span class=n>b</span><span class=o>+</span><span class=mf>0.07</span><span class=p>;</span>
<a href=#__codelineno-6-92 id=__codelineno-6-92 name=__codelineno-6-92></a><span class=p>}</span>
<a href=#__codelineno-6-93 id=__codelineno-6-93 name=__codelineno-6-93></a><span class=kt>vec3</span><span class=w> </span><span class=n>bump_position</span><span class=p>(</span><span class=kt>float</span><span class=w> </span><span class=n>is_moon</span><span class=w> </span><span class=p>,</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>s</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-6-94 id=__codelineno-6-94 name=__codelineno-6-94></a><span class=kt>float</span><span class=w> </span><span class=n>bump</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>bump_height</span><span class=p>(</span><span class=n>is_moon</span><span class=p>,</span><span class=w> </span><span class=n>s</span><span class=p>);</span>
<a href=#__codelineno-6-95 id=__codelineno-6-95 name=__codelineno-6-95></a><span class=kt>vec3</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>s</span><span class=p>;</span>
<a href=#__codelineno-6-96 id=__codelineno-6-96 name=__codelineno-6-96></a><span class=kt>vec3</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>s</span><span class=p>;</span>
<a href=#__codelineno-6-97 id=__codelineno-6-97 name=__codelineno-6-97></a><span class=k>return</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>1.0</span><span class=o>*</span><span class=n>bump</span><span class=o>*</span><span class=n>n</span><span class=p>;</span>
<a href=#__codelineno-6-98 id=__codelineno-6-98 name=__codelineno-6-98></a><span class=p>}</span>
<a href=#__codelineno-6-99 id=__codelineno-6-99 name=__codelineno-6-99></a><span class=kt>void</span><span class=w> </span><span class=n>tangent</span><span class=p>(</span><span class=k>in</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>N</span><span class=p>,</span><span class=w> </span><span class=k>out</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>T</span><span class=p>,</span><span class=w> </span><span class=k>out</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>B</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-6-100 id=__codelineno-6-100 name=__codelineno-6-100></a><span class=kt>vec3</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mo>0</span><span class=p>,</span><span class=mo>0</span><span class=p>);</span>
<a href=#__codelineno-6-101 id=__codelineno-6-101 name=__codelineno-6-101></a><span class=n>T</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>normalize</span><span class=p>(</span><span class=n>x</span><span class=o>-</span><span class=n>dot</span><span class=p>(</span><span class=n>N</span><span class=p>,</span><span class=n>x</span><span class=p>)</span><span class=o>*</span><span class=n>N</span><span class=p>);</span>
<a href=#__codelineno-6-102 id=__codelineno-6-102 name=__codelineno-6-102></a><span class=n>B</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cross</span><span class=p>(</span><span class=n>N</span><span class=p>,</span><span class=n>T</span><span class=p>);</span>
<a href=#__codelineno-6-103 id=__codelineno-6-103 name=__codelineno-6-103></a><span class=p>}</span>
<a href=#__codelineno-6-104 id=__codelineno-6-104 name=__codelineno-6-104></a><span class=err>`</span>
<a href=#__codelineno-6-105 id=__codelineno-6-105 name=__codelineno-6-105></a><span class=k>const</span><span class=w> </span><span class=n>vertexShaders</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{};</span>
<a href=#__codelineno-6-106 id=__codelineno-6-106 name=__codelineno-6-106></a>
<a href=#__codelineno-6-107 id=__codelineno-6-107 name=__codelineno-6-107></a><span class=n>vertexShaders</span><span class=p>.</span><span class=n>simpleVertexShader</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>`</span>
<a href=#__codelineno-6-108 id=__codelineno-6-108 name=__codelineno-6-108></a><span class=k>varying</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>vNormal</span><span class=p>;</span>
<a href=#__codelineno-6-109 id=__codelineno-6-109 name=__codelineno-6-109></a><span class=k>varying</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>vPos</span><span class=p>;</span>
<a href=#__codelineno-6-110 id=__codelineno-6-110 name=__codelineno-6-110></a><span class=k>varying</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>vViewPos</span><span class=p>;</span>
<a href=#__codelineno-6-111 id=__codelineno-6-111 name=__codelineno-6-111></a><span class=kt>void</span><span class=w> </span><span class=n>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-6-112 id=__codelineno-6-112 name=__codelineno-6-112></a><span class=w>    </span><span class=n>vPos</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>position</span><span class=p>;</span>
<a href=#__codelineno-6-113 id=__codelineno-6-113 name=__codelineno-6-113></a><span class=w>    </span><span class=n>vViewPos</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>modelViewMatrix</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=kt>vec4</span><span class=p>(</span><span class=n>position</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>)).</span><span class=n>xyz</span><span class=p>;</span>
<a href=#__codelineno-6-114 id=__codelineno-6-114 name=__codelineno-6-114></a><span class=w>    </span><span class=n>vNormal</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>normalMatrix</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>normalize</span><span class=p>(</span><span class=n>normal</span><span class=p>);</span>
<a href=#__codelineno-6-115 id=__codelineno-6-115 name=__codelineno-6-115></a><span class=w>    </span><span class=nb>gl_Position</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>projectionMatrix</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>modelViewMatrix</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=kt>vec4</span><span class=p>(</span><span class=n>position</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>);;</span><span class=w>   </span>
<a href=#__codelineno-6-116 id=__codelineno-6-116 name=__codelineno-6-116></a><span class=p>}</span>
<a href=#__codelineno-6-117 id=__codelineno-6-117 name=__codelineno-6-117></a><span class=err>`</span>
<a href=#__codelineno-6-118 id=__codelineno-6-118 name=__codelineno-6-118></a>
<a href=#__codelineno-6-119 id=__codelineno-6-119 name=__codelineno-6-119></a><span class=k>const</span><span class=w> </span><span class=n>fragmentShaders</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{};</span>
<a href=#__codelineno-6-120 id=__codelineno-6-120 name=__codelineno-6-120></a><span class=n>fragmentShaders</span><span class=p>.</span><span class=n>normalFragmentShader</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>`</span>
<a href=#__codelineno-6-121 id=__codelineno-6-121 name=__codelineno-6-121></a><span class=k>varying</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>vNormal</span><span class=p>;</span>
<a href=#__codelineno-6-122 id=__codelineno-6-122 name=__codelineno-6-122></a><span class=kt>void</span><span class=w> </span><span class=n>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-6-123 id=__codelineno-6-123 name=__codelineno-6-123></a><span class=w>    </span><span class=nb>gl_FragColor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>vec4</span><span class=p>(</span><span class=mf>0.5</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>0.5</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>vNormal</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>);</span>
<a href=#__codelineno-6-124 id=__codelineno-6-124 name=__codelineno-6-124></a><span class=p>}</span>
<a href=#__codelineno-6-125 id=__codelineno-6-125 name=__codelineno-6-125></a><span class=err>`</span>
<a href=#__codelineno-6-126 id=__codelineno-6-126 name=__codelineno-6-126></a><span class=n>fragmentShaders</span><span class=p>.</span><span class=n>posFragmentShader</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>`</span>
<a href=#__codelineno-6-127 id=__codelineno-6-127 name=__codelineno-6-127></a><span class=k>varying</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>vViewPos</span><span class=p>;</span>
<a href=#__codelineno-6-128 id=__codelineno-6-128 name=__codelineno-6-128></a><span class=kt>void</span><span class=w> </span><span class=n>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-6-129 id=__codelineno-6-129 name=__codelineno-6-129></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>color</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>0.5</span><span class=p>,</span><span class=mf>0.5</span><span class=p>,</span><span class=mo>0</span><span class=p>)</span><span class=o>+</span><span class=kt>vec3</span><span class=p>(</span><span class=mf>0.5</span><span class=p>,</span><span class=mf>0.5</span><span class=p>,</span><span class=mo>0</span><span class=p>)</span><span class=o>*</span><span class=n>vViewPos</span><span class=p>.</span><span class=n>xyz</span><span class=p>;</span>
<a href=#__codelineno-6-130 id=__codelineno-6-130 name=__codelineno-6-130></a><span class=w>    </span><span class=nb>gl_FragColor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>vec4</span><span class=p>(</span><span class=n>color</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>);</span>
<a href=#__codelineno-6-131 id=__codelineno-6-131 name=__codelineno-6-131></a><span class=p>}</span>
<a href=#__codelineno-6-132 id=__codelineno-6-132 name=__codelineno-6-132></a><span class=err>`</span>
<a href=#__codelineno-6-133 id=__codelineno-6-133 name=__codelineno-6-133></a><span class=n>fragmentShaders</span><span class=p>.</span><span class=n>depthFragmentShader</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>`</span>
<a href=#__codelineno-6-134 id=__codelineno-6-134 name=__codelineno-6-134></a><span class=k>varying</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>vViewPos</span><span class=p>;</span>
<a href=#__codelineno-6-135 id=__codelineno-6-135 name=__codelineno-6-135></a><span class=kt>void</span><span class=w> </span><span class=n>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-6-136 id=__codelineno-6-136 name=__codelineno-6-136></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>color</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=mf>1.0</span><span class=o>+</span><span class=p>(</span><span class=n>vViewPos</span><span class=p>.</span><span class=n>z</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=o>-</span><span class=mf>3.0</span><span class=p>)</span><span class=o>/</span><span class=mf>5.0</span><span class=p>)</span><span class=o>*</span><span class=kt>vec3</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span><span class=mf>1.0</span><span class=p>,</span><span class=mf>1.0</span><span class=p>);</span>
<a href=#__codelineno-6-137 id=__codelineno-6-137 name=__codelineno-6-137></a><span class=w>    </span><span class=nb>gl_FragColor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>vec4</span><span class=p>(</span><span class=n>color</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>);</span>
<a href=#__codelineno-6-138 id=__codelineno-6-138 name=__codelineno-6-138></a><span class=p>}</span>
<a href=#__codelineno-6-139 id=__codelineno-6-139 name=__codelineno-6-139></a><span class=err>`</span>
<a href=#__codelineno-6-140 id=__codelineno-6-140 name=__codelineno-6-140></a><span class=n>fragmentShaders</span><span class=p>.</span><span class=n>phongFragmentShader</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>blinn_phong</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=err>`</span>
<a href=#__codelineno-6-141 id=__codelineno-6-141 name=__codelineno-6-141></a><span class=k>uniform</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>is_moon</span><span class=p>;</span>
<a href=#__codelineno-6-142 id=__codelineno-6-142 name=__codelineno-6-142></a><span class=k>uniform</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>time</span><span class=p>;</span>
<a href=#__codelineno-6-143 id=__codelineno-6-143 name=__codelineno-6-143></a><span class=k>varying</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>vPos</span><span class=p>;</span>
<a href=#__codelineno-6-144 id=__codelineno-6-144 name=__codelineno-6-144></a><span class=k>varying</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>vNormal</span><span class=p>;</span>
<a href=#__codelineno-6-145 id=__codelineno-6-145 name=__codelineno-6-145></a><span class=k>varying</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>vViewPos</span><span class=p>;</span>
<a href=#__codelineno-6-146 id=__codelineno-6-146 name=__codelineno-6-146></a><span class=kt>void</span><span class=w> </span><span class=n>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-6-147 id=__codelineno-6-147 name=__codelineno-6-147></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>l</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>mat3</span><span class=p>(</span><span class=n>viewMatrix</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>normalize</span><span class=p>(</span><span class=kt>vec3</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=o>-</span><span class=mi>1</span><span class=p>));</span>
<a href=#__codelineno-6-148 id=__codelineno-6-148 name=__codelineno-6-148></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>normalize</span><span class=p>(</span><span class=n>vNormal</span><span class=p>);</span>
<a href=#__codelineno-6-149 id=__codelineno-6-149 name=__codelineno-6-149></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>v</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>normalize</span><span class=p>(</span><span class=o>-</span><span class=n>vViewPos</span><span class=p>);</span>
<a href=#__codelineno-6-150 id=__codelineno-6-150 name=__codelineno-6-150></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>color</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mix</span><span class=p>(</span><span class=kt>vec3</span><span class=p>(</span><span class=mf>0.9</span><span class=p>,</span><span class=mf>0.2</span><span class=p>,</span><span class=mf>0.3</span><span class=p>),</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>0.5</span><span class=p>,</span><span class=mf>0.45</span><span class=p>,</span><span class=mf>0.5</span><span class=p>),</span><span class=w> </span><span class=n>is_moon</span><span class=p>);</span>
<a href=#__codelineno-6-151 id=__codelineno-6-151 name=__codelineno-6-151></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>fragColor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>blinn_phong</span><span class=p>(</span>
<a href=#__codelineno-6-152 id=__codelineno-6-152 name=__codelineno-6-152></a><span class=w>        </span><span class=n>color</span><span class=p>,</span><span class=w> </span><span class=n>color</span><span class=p>,</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>),</span><span class=w> </span><span class=mf>300.0</span><span class=p>,</span>
<a href=#__codelineno-6-153 id=__codelineno-6-153 name=__codelineno-6-153></a><span class=w>        </span><span class=n>n</span><span class=p>,</span><span class=w> </span><span class=n>v</span><span class=p>,</span><span class=w> </span><span class=n>l</span>
<a href=#__codelineno-6-154 id=__codelineno-6-154 name=__codelineno-6-154></a><span class=w>    </span><span class=p>);</span>
<a href=#__codelineno-6-155 id=__codelineno-6-155 name=__codelineno-6-155></a><span class=w>    </span><span class=nb>gl_FragColor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>vec4</span><span class=p>(</span><span class=n>fragColor</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>);</span>
<a href=#__codelineno-6-156 id=__codelineno-6-156 name=__codelineno-6-156></a><span class=p>}</span>
<a href=#__codelineno-6-157 id=__codelineno-6-157 name=__codelineno-6-157></a><span class=err>`</span>
<a href=#__codelineno-6-158 id=__codelineno-6-158 name=__codelineno-6-158></a><span class=n>fragmentShaders</span><span class=p>.</span><span class=n>perlinFragmentShader</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>blinn_phong</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>random_direction</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>smooth_step</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>perlin_noise</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=err>`</span>
<a href=#__codelineno-6-159 id=__codelineno-6-159 name=__codelineno-6-159></a><span class=k>uniform</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>is_moon</span><span class=p>;</span>
<a href=#__codelineno-6-160 id=__codelineno-6-160 name=__codelineno-6-160></a><span class=k>uniform</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>time</span><span class=p>;</span>
<a href=#__codelineno-6-161 id=__codelineno-6-161 name=__codelineno-6-161></a><span class=k>varying</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>vPos</span><span class=p>;</span>
<a href=#__codelineno-6-162 id=__codelineno-6-162 name=__codelineno-6-162></a><span class=k>varying</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>vNormal</span><span class=p>;</span>
<a href=#__codelineno-6-163 id=__codelineno-6-163 name=__codelineno-6-163></a><span class=k>varying</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>vViewPos</span><span class=p>;</span>
<a href=#__codelineno-6-164 id=__codelineno-6-164 name=__codelineno-6-164></a><span class=kt>void</span><span class=w> </span><span class=n>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-6-165 id=__codelineno-6-165 name=__codelineno-6-165></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>l</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>mat3</span><span class=p>(</span><span class=n>viewMatrix</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>normalize</span><span class=p>(</span><span class=kt>vec3</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=o>-</span><span class=mi>1</span><span class=p>));</span>
<a href=#__codelineno-6-166 id=__codelineno-6-166 name=__codelineno-6-166></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>normalize</span><span class=p>(</span><span class=n>vNormal</span><span class=p>);</span>
<a href=#__codelineno-6-167 id=__codelineno-6-167 name=__codelineno-6-167></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>v</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>normalize</span><span class=p>(</span><span class=o>-</span><span class=n>vViewPos</span><span class=p>);</span>
<a href=#__codelineno-6-168 id=__codelineno-6-168 name=__codelineno-6-168></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>color</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mix</span><span class=p>(</span><span class=kt>vec3</span><span class=p>(</span><span class=mf>0.9</span><span class=p>,</span><span class=mf>0.2</span><span class=p>,</span><span class=mf>0.3</span><span class=p>),</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>0.5</span><span class=p>,</span><span class=mf>0.45</span><span class=p>,</span><span class=mf>0.5</span><span class=p>),</span><span class=w> </span><span class=n>is_moon</span><span class=p>);</span>
<a href=#__codelineno-6-169 id=__codelineno-6-169 name=__codelineno-6-169></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>sphere_fs_in</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>normalize</span><span class=p>(</span><span class=n>vPos</span><span class=p>);</span>
<a href=#__codelineno-6-170 id=__codelineno-6-170 name=__codelineno-6-170></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sin</span><span class=p>(</span><span class=mf>5.0</span><span class=o>*</span><span class=p>(</span><span class=n>sphere_fs_in</span><span class=p>.</span><span class=n>y</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>0.5</span><span class=w> </span><span class=o>*</span><span class=n>perlin_noise</span><span class=p>(</span><span class=w> </span><span class=n>sphere_fs_in</span><span class=w> </span><span class=p>)))</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=mf>0.991</span><span class=o>+</span><span class=mf>0.009</span><span class=o>*</span><span class=n>perlin_noise</span><span class=p>(</span><span class=w> </span><span class=mf>2.0</span><span class=w>  </span><span class=o>*</span><span class=w> </span><span class=n>sphere_fs_in</span><span class=p>));</span>
<a href=#__codelineno-6-171 id=__codelineno-6-171 name=__codelineno-6-171></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>s2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0.25</span><span class=o>*</span><span class=n>perlin_noise</span><span class=p>(</span><span class=w> </span><span class=mf>1.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>sphere_fs_in</span><span class=w> </span><span class=p>)</span><span class=w> </span>
<a href=#__codelineno-6-172 id=__codelineno-6-172 name=__codelineno-6-172></a><span class=w>    </span><span class=o>+</span><span class=w> </span><span class=mf>0.25</span><span class=o>*</span><span class=n>perlin_noise</span><span class=p>(</span><span class=w> </span><span class=mf>4.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>sphere_fs_in</span><span class=w> </span><span class=p>)</span><span class=w> </span>
<a href=#__codelineno-6-173 id=__codelineno-6-173 name=__codelineno-6-173></a><span class=w>    </span><span class=o>+</span><span class=w> </span><span class=mf>0.25</span><span class=o>*</span><span class=n>perlin_noise</span><span class=p>(</span><span class=w> </span><span class=mf>8.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>sphere_fs_in</span><span class=w> </span><span class=p>)</span><span class=w> </span>
<a href=#__codelineno-6-174 id=__codelineno-6-174 name=__codelineno-6-174></a><span class=w>    </span><span class=o>+</span><span class=w> </span><span class=mf>0.25</span><span class=o>*</span><span class=n>perlin_noise</span><span class=p>(</span><span class=mf>16.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>sphere_fs_in</span><span class=w> </span><span class=p>);</span>
<a href=#__codelineno-6-175 id=__codelineno-6-175 name=__codelineno-6-175></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>s3</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>max</span><span class=p>(</span><span class=n>s</span><span class=o>+</span><span class=mf>0.4</span><span class=p>,</span><span class=mf>0.0</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>pow</span><span class=p>(</span><span class=n>min</span><span class=p>((</span><span class=mf>0.5</span><span class=o>+</span><span class=mf>0.5</span><span class=o>*</span><span class=p>(</span>
<a href=#__codelineno-6-176 id=__codelineno-6-176 name=__codelineno-6-176></a><span class=w>    </span><span class=p>(</span><span class=mf>0.2</span><span class=o>*</span><span class=n>sin</span><span class=p>(</span><span class=mf>10.0</span><span class=o>*</span><span class=p>(</span><span class=n>sphere_fs_in</span><span class=p>.</span><span class=n>x</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>perlin_noise</span><span class=p>(</span><span class=w> </span><span class=mf>8.0</span><span class=o>*</span><span class=n>sphere_fs_in</span><span class=w> </span><span class=p>)))</span>
<a href=#__codelineno-6-177 id=__codelineno-6-177 name=__codelineno-6-177></a><span class=w>    </span><span class=o>+</span><span class=w> </span><span class=mf>0.2</span><span class=o>*</span><span class=n>sin</span><span class=p>(</span><span class=mf>15.0</span><span class=o>*</span><span class=p>(</span><span class=n>sphere_fs_in</span><span class=p>.</span><span class=n>z</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>perlin_noise</span><span class=p>(</span><span class=w> </span><span class=mf>8.0</span><span class=o>*</span><span class=n>sphere_fs_in</span><span class=w> </span><span class=p>)))</span>
<a href=#__codelineno-6-178 id=__codelineno-6-178 name=__codelineno-6-178></a><span class=w>    </span><span class=o>+</span><span class=w> </span><span class=mf>0.2</span><span class=o>*</span><span class=n>perlin_noise</span><span class=p>(</span><span class=mf>16.0</span><span class=o>*</span><span class=n>sphere_fs_in</span><span class=p>))</span>
<a href=#__codelineno-6-179 id=__codelineno-6-179 name=__codelineno-6-179></a><span class=w>    </span><span class=o>+</span><span class=w> </span><span class=mf>0.6</span><span class=o>*</span><span class=n>perlin_noise</span><span class=p>(</span><span class=mf>32.0</span><span class=o>*</span><span class=n>sphere_fs_in</span><span class=p>)</span>
<a href=#__codelineno-6-180 id=__codelineno-6-180 name=__codelineno-6-180></a><span class=w>    </span><span class=p>))</span>
<a href=#__codelineno-6-181 id=__codelineno-6-181 name=__codelineno-6-181></a><span class=w>    </span><span class=p>,</span><span class=mf>1.0</span><span class=p>),</span><span class=mf>2.0</span><span class=p>);</span>
<a href=#__codelineno-6-182 id=__codelineno-6-182 name=__codelineno-6-182></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>1.0</span><span class=o>-</span><span class=n>clamp</span><span class=p>(</span><span class=mf>0.1</span><span class=o>*</span><span class=n>pow</span><span class=p>(</span><span class=n>s</span><span class=o>*</span><span class=mf>0.5</span><span class=o>+</span><span class=mf>0.5</span><span class=p>,</span><span class=mf>20.0</span><span class=p>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>0.7</span><span class=o>*</span><span class=p>(</span><span class=mf>0.5</span><span class=o>*</span><span class=n>s2</span><span class=o>+</span><span class=mf>0.5</span><span class=p>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>0.2</span><span class=o>*</span><span class=n>s3</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>);</span>
<a href=#__codelineno-6-183 id=__codelineno-6-183 name=__codelineno-6-183></a><span class=w>    </span><span class=n>color</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>blinn_phong</span><span class=p>(</span>
<a href=#__codelineno-6-184 id=__codelineno-6-184 name=__codelineno-6-184></a><span class=w>        </span><span class=n>b</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>color</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>color</span><span class=p>,</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>),</span><span class=w> </span><span class=mf>300.0</span><span class=p>,</span>
<a href=#__codelineno-6-185 id=__codelineno-6-185 name=__codelineno-6-185></a><span class=w>        </span><span class=n>n</span><span class=p>,</span><span class=w> </span><span class=n>v</span><span class=p>,</span><span class=w> </span><span class=n>l</span>
<a href=#__codelineno-6-186 id=__codelineno-6-186 name=__codelineno-6-186></a><span class=w>    </span><span class=p>);</span>
<a href=#__codelineno-6-187 id=__codelineno-6-187 name=__codelineno-6-187></a><span class=w>    </span><span class=nb>gl_FragColor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>vec4</span><span class=p>(</span><span class=n>color</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>);</span>
<a href=#__codelineno-6-188 id=__codelineno-6-188 name=__codelineno-6-188></a><span class=p>}</span>
<a href=#__codelineno-6-189 id=__codelineno-6-189 name=__codelineno-6-189></a><span class=err>`</span>
<a href=#__codelineno-6-190 id=__codelineno-6-190 name=__codelineno-6-190></a>
<a href=#__codelineno-6-191 id=__codelineno-6-191 name=__codelineno-6-191></a><span class=n>fragmentShaders</span><span class=p>.</span><span class=n>bumpFragmentShader</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>blinn_phong</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>bump</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=err>`</span>
<a href=#__codelineno-6-192 id=__codelineno-6-192 name=__codelineno-6-192></a><span class=k>uniform</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>is_moon</span><span class=p>;</span>
<a href=#__codelineno-6-193 id=__codelineno-6-193 name=__codelineno-6-193></a><span class=k>uniform</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>time</span><span class=p>;</span>
<a href=#__codelineno-6-194 id=__codelineno-6-194 name=__codelineno-6-194></a><span class=k>uniform</span><span class=w> </span><span class=kt>mat3</span><span class=w> </span><span class=n>normalMatrix</span><span class=p>;</span>
<a href=#__codelineno-6-195 id=__codelineno-6-195 name=__codelineno-6-195></a><span class=k>varying</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>vPos</span><span class=p>;</span>
<a href=#__codelineno-6-196 id=__codelineno-6-196 name=__codelineno-6-196></a><span class=k>varying</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>vNormal</span><span class=p>;</span>
<a href=#__codelineno-6-197 id=__codelineno-6-197 name=__codelineno-6-197></a><span class=k>varying</span><span class=w> </span><span class=kt>vec3</span><span class=w> </span><span class=n>vViewPos</span><span class=p>;</span>
<a href=#__codelineno-6-198 id=__codelineno-6-198 name=__codelineno-6-198></a><span class=kt>void</span><span class=w> </span><span class=n>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-6-199 id=__codelineno-6-199 name=__codelineno-6-199></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>sphere_fs_in</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>vPos</span><span class=p>;</span>
<a href=#__codelineno-6-200 id=__codelineno-6-200 name=__codelineno-6-200></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>l</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>mat3</span><span class=p>(</span><span class=n>viewMatrix</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>normalize</span><span class=p>(</span><span class=kt>vec3</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=o>-</span><span class=mi>1</span><span class=p>));</span>
<a href=#__codelineno-6-201 id=__codelineno-6-201 name=__codelineno-6-201></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sphere_fs_in</span><span class=p>;</span>
<a href=#__codelineno-6-202 id=__codelineno-6-202 name=__codelineno-6-202></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>v</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>normalize</span><span class=p>(</span><span class=o>-</span><span class=n>vViewPos</span><span class=p>);</span>
<a href=#__codelineno-6-203 id=__codelineno-6-203 name=__codelineno-6-203></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>color</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mix</span><span class=p>(</span><span class=kt>vec3</span><span class=p>(</span><span class=mf>0.9</span><span class=p>,</span><span class=mf>0.2</span><span class=p>,</span><span class=mf>0.3</span><span class=p>),</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>0.5</span><span class=p>,</span><span class=mf>0.45</span><span class=p>,</span><span class=mf>0.5</span><span class=p>),</span><span class=w> </span><span class=n>is_moon</span><span class=p>);</span>
<a href=#__codelineno-6-204 id=__codelineno-6-204 name=__codelineno-6-204></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sin</span><span class=p>(</span><span class=mf>5.0</span><span class=o>*</span><span class=p>(</span><span class=n>sphere_fs_in</span><span class=p>.</span><span class=n>y</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>0.5</span><span class=w> </span><span class=o>*</span><span class=n>perlin_noise</span><span class=p>(</span><span class=w> </span><span class=n>sphere_fs_in</span><span class=w> </span><span class=p>)))</span><span class=w> </span>
<a href=#__codelineno-6-205 id=__codelineno-6-205 name=__codelineno-6-205></a><span class=w>    </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=mf>0.991</span><span class=o>+</span><span class=mf>0.009</span><span class=o>*</span><span class=n>perlin_noise</span><span class=p>(</span><span class=w> </span><span class=mf>2.0</span><span class=w>  </span><span class=o>*</span><span class=w> </span><span class=n>sphere_fs_in</span><span class=p>));</span>
<a href=#__codelineno-6-206 id=__codelineno-6-206 name=__codelineno-6-206></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>s2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0.25</span><span class=o>*</span><span class=n>perlin_noise</span><span class=p>(</span><span class=w> </span><span class=mf>1.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>sphere_fs_in</span><span class=w> </span><span class=p>)</span><span class=w> </span>
<a href=#__codelineno-6-207 id=__codelineno-6-207 name=__codelineno-6-207></a><span class=w>    </span><span class=o>+</span><span class=w> </span><span class=mf>0.25</span><span class=o>*</span><span class=n>perlin_noise</span><span class=p>(</span><span class=w> </span><span class=mf>4.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>sphere_fs_in</span><span class=w> </span><span class=p>)</span><span class=w> </span>
<a href=#__codelineno-6-208 id=__codelineno-6-208 name=__codelineno-6-208></a><span class=w>    </span><span class=o>+</span><span class=w> </span><span class=mf>0.25</span><span class=o>*</span><span class=n>perlin_noise</span><span class=p>(</span><span class=w> </span><span class=mf>8.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>sphere_fs_in</span><span class=w> </span><span class=p>)</span><span class=w> </span>
<a href=#__codelineno-6-209 id=__codelineno-6-209 name=__codelineno-6-209></a><span class=w>    </span><span class=o>+</span><span class=w> </span><span class=mf>0.25</span><span class=o>*</span><span class=n>perlin_noise</span><span class=p>(</span><span class=mf>16.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>sphere_fs_in</span><span class=w> </span><span class=p>);</span>
<a href=#__codelineno-6-210 id=__codelineno-6-210 name=__codelineno-6-210></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>s3</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>max</span><span class=p>(</span><span class=n>s</span><span class=o>+</span><span class=mf>0.4</span><span class=p>,</span><span class=mf>0.0</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>pow</span><span class=p>(</span><span class=n>min</span><span class=p>((</span><span class=mf>0.5</span><span class=o>+</span><span class=mf>0.5</span><span class=o>*</span><span class=p>(</span>
<a href=#__codelineno-6-211 id=__codelineno-6-211 name=__codelineno-6-211></a><span class=w>    </span><span class=p>(</span><span class=mf>0.2</span><span class=o>*</span><span class=n>sin</span><span class=p>(</span><span class=mf>10.0</span><span class=o>*</span><span class=p>(</span><span class=n>sphere_fs_in</span><span class=p>.</span><span class=n>x</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>perlin_noise</span><span class=p>(</span><span class=w> </span><span class=mf>8.0</span><span class=o>*</span><span class=n>sphere_fs_in</span><span class=w> </span><span class=p>)))</span>
<a href=#__codelineno-6-212 id=__codelineno-6-212 name=__codelineno-6-212></a><span class=w>    </span><span class=o>+</span><span class=w> </span><span class=mf>0.2</span><span class=o>*</span><span class=n>sin</span><span class=p>(</span><span class=mf>15.0</span><span class=o>*</span><span class=p>(</span><span class=n>sphere_fs_in</span><span class=p>.</span><span class=n>z</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>perlin_noise</span><span class=p>(</span><span class=w> </span><span class=mf>8.0</span><span class=o>*</span><span class=n>sphere_fs_in</span><span class=w> </span><span class=p>)))</span>
<a href=#__codelineno-6-213 id=__codelineno-6-213 name=__codelineno-6-213></a><span class=w>    </span><span class=o>+</span><span class=w> </span><span class=mf>0.2</span><span class=o>*</span><span class=n>perlin_noise</span><span class=p>(</span><span class=mf>16.0</span><span class=o>*</span><span class=n>sphere_fs_in</span><span class=p>))</span>
<a href=#__codelineno-6-214 id=__codelineno-6-214 name=__codelineno-6-214></a><span class=w>    </span><span class=o>+</span><span class=w> </span><span class=mf>0.6</span><span class=o>*</span><span class=n>perlin_noise</span><span class=p>(</span><span class=mf>32.0</span><span class=o>*</span><span class=n>sphere_fs_in</span><span class=p>)</span>
<a href=#__codelineno-6-215 id=__codelineno-6-215 name=__codelineno-6-215></a><span class=w>    </span><span class=p>))</span>
<a href=#__codelineno-6-216 id=__codelineno-6-216 name=__codelineno-6-216></a><span class=w>    </span><span class=p>,</span><span class=mf>1.0</span><span class=p>),</span><span class=mf>2.0</span><span class=p>);</span>
<a href=#__codelineno-6-217 id=__codelineno-6-217 name=__codelineno-6-217></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>1.0</span><span class=o>-</span><span class=n>clamp</span><span class=p>(</span><span class=mf>0.1</span><span class=o>*</span><span class=n>pow</span><span class=p>(</span><span class=n>s</span><span class=o>*</span><span class=mf>0.5</span><span class=o>+</span><span class=mf>0.5</span><span class=p>,</span><span class=mf>20.0</span><span class=p>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>0.7</span><span class=o>*</span><span class=p>(</span><span class=mf>0.5</span><span class=o>*</span><span class=n>s2</span><span class=o>+</span><span class=mf>0.5</span><span class=p>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>0.2</span><span class=o>*</span><span class=n>s3</span><span class=p>,</span><span class=w> </span><span class=mf>0.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>);</span>
<a href=#__codelineno-6-218 id=__codelineno-6-218 name=__codelineno-6-218></a>
<a href=#__codelineno-6-219 id=__codelineno-6-219 name=__codelineno-6-219></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>bp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>bump_position</span><span class=p>(</span><span class=n>is_moon</span><span class=p>,</span><span class=w> </span><span class=n>sphere_fs_in</span><span class=p>);</span>
<a href=#__codelineno-6-220 id=__codelineno-6-220 name=__codelineno-6-220></a><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>eps</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0.0001</span><span class=p>;</span>
<a href=#__codelineno-6-221 id=__codelineno-6-221 name=__codelineno-6-221></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>T</span><span class=p>;</span>
<a href=#__codelineno-6-222 id=__codelineno-6-222 name=__codelineno-6-222></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>B</span><span class=p>;</span>
<a href=#__codelineno-6-223 id=__codelineno-6-223 name=__codelineno-6-223></a><span class=w>    </span><span class=n>tangent</span><span class=p>(</span><span class=n>n</span><span class=p>,</span><span class=n>T</span><span class=p>,</span><span class=n>B</span><span class=p>);</span>
<a href=#__codelineno-6-224 id=__codelineno-6-224 name=__codelineno-6-224></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>pT</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sphere_fs_in</span><span class=o>+</span><span class=n>eps</span><span class=o>*</span><span class=n>T</span><span class=p>;</span>
<a href=#__codelineno-6-225 id=__codelineno-6-225 name=__codelineno-6-225></a><span class=w>    </span><span class=kt>vec3</span><span class=w> </span><span class=n>pB</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sphere_fs_in</span><span class=o>+</span><span class=n>eps</span><span class=o>*</span><span class=n>B</span><span class=p>;</span>
<a href=#__codelineno-6-226 id=__codelineno-6-226 name=__codelineno-6-226></a><span class=w>    </span><span class=n>n</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>normalize</span><span class=p>(</span><span class=n>cross</span><span class=p>(</span>
<a href=#__codelineno-6-227 id=__codelineno-6-227 name=__codelineno-6-227></a><span class=w>        </span><span class=n>bump_position</span><span class=p>(</span><span class=n>is_moon</span><span class=p>,</span><span class=w> </span><span class=n>pT</span><span class=p>)</span><span class=o>-</span><span class=n>bp</span><span class=p>,</span>
<a href=#__codelineno-6-228 id=__codelineno-6-228 name=__codelineno-6-228></a><span class=w>        </span><span class=n>bump_position</span><span class=p>(</span><span class=n>is_moon</span><span class=p>,</span><span class=w> </span><span class=n>pB</span><span class=p>)</span><span class=o>-</span><span class=n>bp</span><span class=p>));</span>
<a href=#__codelineno-6-229 id=__codelineno-6-229 name=__codelineno-6-229></a><span class=w>    </span><span class=n>n</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>normalMatrix</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>normalize</span><span class=p>(</span><span class=n>n</span><span class=p>);</span>
<a href=#__codelineno-6-230 id=__codelineno-6-230 name=__codelineno-6-230></a>
<a href=#__codelineno-6-231 id=__codelineno-6-231 name=__codelineno-6-231></a><span class=w>    </span><span class=n>color</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>blinn_phong</span><span class=p>(</span>
<a href=#__codelineno-6-232 id=__codelineno-6-232 name=__codelineno-6-232></a><span class=w>        </span><span class=n>b</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>color</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>color</span><span class=p>,</span><span class=w> </span><span class=kt>vec3</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>),</span><span class=w> </span><span class=mf>300.0</span><span class=p>,</span>
<a href=#__codelineno-6-233 id=__codelineno-6-233 name=__codelineno-6-233></a><span class=w>        </span><span class=n>n</span><span class=p>,</span><span class=w> </span><span class=n>v</span><span class=p>,</span><span class=w> </span><span class=n>l</span>
<a href=#__codelineno-6-234 id=__codelineno-6-234 name=__codelineno-6-234></a><span class=w>    </span><span class=p>);</span><span class=w>    </span>
<a href=#__codelineno-6-235 id=__codelineno-6-235 name=__codelineno-6-235></a><span class=w>    </span><span class=nb>gl_FragColor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>vec4</span><span class=p>(</span><span class=n>color</span><span class=p>,</span><span class=w> </span><span class=mf>1.0</span><span class=p>);</span>
<a href=#__codelineno-6-236 id=__codelineno-6-236 name=__codelineno-6-236></a><span class=p>}</span>
<a href=#__codelineno-6-237 id=__codelineno-6-237 name=__codelineno-6-237></a><span class=err>`</span>
<a href=#__codelineno-6-238 id=__codelineno-6-238 name=__codelineno-6-238></a>
<a href=#__codelineno-6-239 id=__codelineno-6-239 name=__codelineno-6-239></a><span class=n>export</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>vertexShaders</span><span class=p>,</span><span class=w> </span><span class=n>fragmentShaders</span><span class=w> </span><span class=p>};</span>
</code></pre></div> </details> </article> </div> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2017 - 2023 | Haoda Li </div> </div> <div class=md-social> <a href=https://www.linkedin.com/in/haoda-li-515b26165/ target=_blank rel=noopener title=www.linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> <a href=https://github.com/haoda-li/ target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href="https://scholar.google.com/citations?user=e1Bif78AAAAJ" target=_blank rel=noopener title=scholar.google.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 488 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["navigation.tabs", "navigation.top"], "search": "../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../assets/javascripts/bundle.220ee61c.min.js></script> <script src=https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js></script> <script src=../assets/extra.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js></script> <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body> </html>